(function(b,d){function c(c){return!b(c).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}function e(d,g){var e=d.nodeName.toLowerCase();if("area"===e){var e=d.parentNode,k=e.name;if(!d.href||!k||"map"!==e.nodeName.toLowerCase())return!1;e=b("img[usemap=#"+k+"]")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(e)?!d.disabled:"a"==e?d.href||g:g)&&c(d)}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(c,d){return"number"==typeof c?this.each(function(){var e=
this;setTimeout(function(){b(e).focus();d&&d.call(e)},c)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?c=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):c=this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?b(document):c},zIndex:function(c){if(c!==d)return this.css("zIndex",c);if(this.length)for(var c=b(this[0]),g;c.length&&c[0]!==document;){g=c.css("position");if("absolute"===g||"relative"===g||"fixed"===g)if(g=parseInt(c.css("zIndex"),10),!isNaN(g)&&0!==g)return g;c=c.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(c,g){function e(c,d,g,n){b.each(k,function(){d-=parseFloat(b.curCSS(c,"padding"+this,!0))||0;g&&(d-=parseFloat(b.curCSS(c,"border"+this+"Width",!0))||0);n&&(d-=parseFloat(b.curCSS(c,"margin"+this,!0))||0)});return d}var k="Width"===g?["Left","Right"]:["Top","Bottom"],n=g.toLowerCase(),l={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+g]=function(c){return c===d?l["inner"+g].call(this):this.each(function(){b(this).css(n,e(this,c)+"px")})};b.fn["outer"+g]=function(c,d){return"number"!=typeof c?l["outer"+g].call(this,c):this.each(function(){b(this).css(n,e(this,c,!0,d)+"px")})}}),b.extend(b.expr[":"],{data:function(c,d,e){return!!b.data(c,e[3])},focusable:function(c){return e(c,!isNaN(b.attr(c,"tabindex")))},tabbable:function(c){var d=b.attr(c,"tabindex"),h=isNaN(d);
return(h||0<=d)&&e(c,!h)}}),b(function(){var c=document.body,d=c.appendChild(d=document.createElement("div"));d.offsetHeight;b.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===d.offsetHeight;b.support.selectstart="onselectstart"in d;c.removeChild(d).style.display="none"}),b.extend(b.ui,{plugin:{add:function(c,d,e){var c=b.ui[c].prototype,k;for(k in e)c.plugins[k]=c.plugins[k]||[],c.plugins[k].push([d,e[k]])},call:function(b,c,d){if((c=b.plugins[c])&&
b.element[0].parentNode)for(var e=0;e<c.length;e++)b.options[c[e][0]]&&c[e][1].apply(b.element,d)}},contains:function(b,c){return document.compareDocumentPosition?b.compareDocumentPosition(c)&16:b!==c&&b.contains(c)},hasScroll:function(c,d){if("hidden"===b(c).css("overflow"))return!1;var e=d&&"left"===d?"scrollLeft":"scrollTop",k=!1;if(0<c[e])return!0;c[e]=1;k=0<c[e];c[e]=0;return k},isOverAxis:function(b,c,d){return b>c&&b<c+d},isOver:function(c,d,e,k,n,l){return b.ui.isOverAxis(c,e,n)&&b.ui.isOverAxis(d,
k,l)}}))})(jQuery);
(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(d){for(var e=0,h;null!=(h=d[e]);e++)try{b(h).triggerHandler("remove")}catch(k){}c(d)}}else{var e=b.fn.remove;b.fn.remove=function(c,d){return this.each(function(){d||(!c||b.filter(c,[this]).length)&&b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(c){}});return e.call(b(this),c,d)})}}b.widget=function(c,d,e){var k=c.split(".")[0],n,c=c.split(".")[1];n=k+"-"+c;e||(e=d,d=b.Widget);b.expr[":"][n]=
function(d){return!!b.data(d,c)};b[k]=b[k]||{};b[k][c]=function(b,c){arguments.length&&this._createWidget(b,c)};d=new d;d.options=b.extend(!0,{},d.options);b[k][c].prototype=b.extend(!0,d,{namespace:k,widgetName:c,widgetEventPrefix:b[k][c].prototype.widgetEventPrefix||c,widgetBaseClass:n},e);b.widget.bridge(c,b[k][c])};b.widget.bridge=function(c,e){b.fn[c]=function(h){var k="string"==typeof h,n=Array.prototype.slice.call(arguments,1),l=this,h=!k&&n.length?b.extend.apply(null,[!0,h].concat(n)):h;if(k&&
"_"===h.charAt(0))return l;k?this.each(function(){var e=b.data(this,c),g=e&&b.isFunction(e[h])?e[h].apply(e,n):e;if(g!==e&&g!==d)return l=g,!1}):this.each(function(){var d=b.data(this,c);d?d.option(h||{})._init():b.data(this,c,new e(h,this))});return l}};b.Widget=function(b,c){arguments.length&&this._createWidget(b,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(c,d){b.data(d,this.widgetName,this);this.element=b(d);this.options=b.extend(!0,
{},this.options,this._getCreateOptions(),c);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,e){var h=c;if(0===arguments.length)return b.extend({},this.options);if("string"==typeof c){if(e===d)return this.options[c];h={};h[c]=e}this._setOptions(h);return this},_setOptions:function(c){var d=this;b.each(c,function(b,c){d._setOption(b,c)});return this},_setOption:function(b,c){this.options[b]=c;"disabled"===b&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
c);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(c,d,e){var k,n=this.options[c],e=e||{},d=b.Event(d);d.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();d.target=this.element[0];if(c=d.originalEvent)for(k in c)k in d||(d[k]=c[k]);this.element.trigger(d,e);return!(b.isFunction(n)&&!1===n.call(this.element[0],d,e)||d.isDefaultPrevented())}}})(jQuery);
(function(b){var d=!1;b(document).mouseup(function(){d=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(b){return c._mouseDown(b)}).bind("click."+this.widgetName,function(d){if(!0===b.data(d.target,c.widgetName+".preventClickEvent"))return b.removeData(d.target,c.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var e=this,f=1==c.which,g="string"==typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:!1;if(!f||g||!this._mouseCapture(c))return!0;(this.mouseDelayMet=!this.options.delay)||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),
!this._mouseStarted))return c.preventDefault(),!0;!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return e._mouseMove(b)};this._mouseUpDelegate=function(b){return e._mouseUp(b)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=!0}},_mouseMove:function(c){if(b.browser.msie&&!(9<=document.documentMode)&&
!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?this._mouseDrag(c):this._mouseUp(c));return!this._mouseStarted},_mouseUp:function(c){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,c.target==
this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(d){var c=this.options;if(this.helper||c.disabled||b(d.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(d);if(!this.handle)return!1;c.iframeFix&&b(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return!0},_mouseStart:function(d){var c=this.options;this.helper=this._createHelper(d);this._cacheHelperProportions();b.ui.ddmanager&&(b.ui.ddmanager.current=
this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;
this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",d))return this._clear(),!1;this._cacheHelperProportions();b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,d);return!0},_mouseDrag:function(d,c){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var e=this._uiHash();if(!1===this._trigger("drag",d,e))return this._mouseUp({}),!1;this.position=e.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,d);return!1},_mouseStop:function(d){var c=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(c=b.ui.ddmanager.drop(this,d));this.dropped&&(c=this.dropped,this.dropped=
!1);if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var e=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",d)&&e._clear()})}else!1!==this._trigger("stop",d)&&this._clear();return!1},_mouseUp:function(d){!0===
this.options.iframeFix&&b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,d);return b.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!b(this.options.handle,this.element).length?!0:!1;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==d.target&&(c=
!0)});return c},_createHelper:function(d){var c=this.options,d=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[d])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(d){"string"==typeof d&&(d=d.split(" "));b.isArray(d)&&(d={left:+d[0],top:+d[1]||
0});"left"in d&&(this.offset.click.left=d.left+this.margins.left);"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left);"top"in d&&(this.offset.click.top=d.top+this.margins.top);"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;"parent"==d.containment&&(d.containment=this.helper[0].parentNode);if("document"==d.containment||"window"==d.containment)this.containment=["document"==d.containment?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==d.containment?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==d.containment?0:b(window).scrollLeft())+b("document"==d.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==d.containment?0:b(window).scrollTop())+(b("document"==d.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)&&d.containment.constructor!=Array){var d=b(d.containment),c=d[0];if(c){d.offset();var e="hidden"!=b(c).css("overflow");this.containment=[(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),
10)||0),(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0),(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=d}}else d.containment.constructor==Array&&(this.containment=d.containment)},_convertPositionTo:function(d,c){c||(c=this.position);var e="absolute"==d?1:-1,f="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*e+this.offset.parent.top*e-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*e),left:c.left+this.offset.relative.left*e+this.offset.parent.left*e-(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*e)}},_generatePosition:function(d){var c=this.options,e="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
f=/(html|body)/i.test(e[0].tagName),g=d.pageX,h=d.pageY;if(this.originalPosition){var k;this.containment&&(this.relative_container?(k=this.relative_container.offset(),k=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]):k=this.containment,d.pageX-this.offset.click.left<k[0]&&(g=k[0]+this.offset.click.left),d.pageY-this.offset.click.top<k[1]&&(h=k[1]+this.offset.click.top),d.pageX-this.offset.click.left>k[2]&&(g=k[2]+this.offset.click.left),
d.pageY-this.offset.click.top>k[3]&&(h=k[3]+this.offset.click.top));c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=k?h-this.offset.click.top<k[1]||h-this.offset.click.top>k[3]?h-this.offset.click.top<k[1]?h+c.grid[1]:h-c.grid[1]:h:h,g=c.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,g=k?g-this.offset.click.left<k[0]||g-this.offset.click.left>k[2]?g-this.offset.click.left<k[0]?
g+c.grid[0]:g-c.grid[0]:g:g)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&526>b.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(d,c,e){e=e||this._uiHash();b.ui.plugin.call(this,d,[c,e]);"drag"==d&&(this.positionAbs=this._convertPositionTo("absolute"));return b.Widget.prototype._trigger.call(this,d,c,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.18"});
b.ui.plugin.add("draggable","connectToSortable",{start:function(d,c){var e=b(this).data("draggable"),f=e.options,g=b.extend({},c,{item:e.element});e.sortables=[];b(f.connectToSortable).each(function(){var c=b.data(this,"sortable");c&&!c.options.disabled&&(e.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",d,g))})},stop:function(d,c){var e=b(this).data("draggable"),f=b.extend({},c,{item:e.element});b.each(e.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(d),this.instance.options.helper=this.instance.options._helper,"original"==e.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",d,f))})},drag:function(d,c){var e=b(this).data("draggable"),f=this;b.each(e.sortables,function(){this.instance.positionAbs=
e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},d.target=this.instance.currentItem[0],this.instance._mouseCapture(d,
!0),this.instance._mouseStart(d,!0,!0),this.instance.offset.click.top=e.offset.click.top,this.instance.offset.click.left=e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",d),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(d)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",d,this.instance._uiHash(this.instance)),this.instance._mouseStop(d,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",d),e.dropped=!1)})}});b.ui.plugin.add("draggable","cursor",{start:function(){var d=b("body"),c=b(this).data("draggable").options;
d.css("cursor")&&(c._cursor=d.css("cursor"));d.css("cursor",c.cursor)},stop:function(){var d=b(this).data("draggable").options;d._cursor&&b("body").css("cursor",d._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(d,c){var e=b(c.helper),f=b(this).data("draggable").options;e.css("opacity")&&(f._opacity=e.css("opacity"));e.css("opacity",f.opacity)},stop:function(d,c){var e=b(this).data("draggable").options;e._opacity&&b(c.helper).css("opacity",e._opacity)}});b.ui.plugin.add("draggable",
"scroll",{start:function(){var d=b(this).data("draggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(d){var c=b(this).data("draggable"),e=c.options,f=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!e.axis||"x"!=e.axis)c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<e.scrollSensitivity?c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+e.scrollSpeed:d.pageY-c.overflowOffset.top<
e.scrollSensitivity&&(c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||"y"!=e.axis)c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<e.scrollSensitivity?c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+e.scrollSpeed:d.pageX-c.overflowOffset.left<e.scrollSensitivity&&(c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||"x"!=e.axis)d.pageY-b(document).scrollTop()<e.scrollSensitivity?f=b(document).scrollTop(b(document).scrollTop()-
e.scrollSpeed):b(window).height()-(d.pageY-b(document).scrollTop())<e.scrollSensitivity&&(f=b(document).scrollTop(b(document).scrollTop()+e.scrollSpeed));if(!e.axis||"y"!=e.axis)d.pageX-b(document).scrollLeft()<e.scrollSensitivity?f=b(document).scrollLeft(b(document).scrollLeft()-e.scrollSpeed):b(window).width()-(d.pageX-b(document).scrollLeft())<e.scrollSensitivity&&(f=b(document).scrollLeft(b(document).scrollLeft()+e.scrollSpeed))}!1!==f&&b.ui.ddmanager&&!e.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,
d)}});b.ui.plugin.add("draggable","snap",{start:function(){var d=b(this).data("draggable"),c=d.options;d.snapElements=[];b(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=b(this),f=c.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(d,c){for(var e=b(this).data("draggable"),f=e.options,g=f.snapTolerance,h=c.offset.left,k=h+e.helperProportions.width,n=c.offset.top,
l=n+e.helperProportions.height,s=e.snapElements.length-1;0<=s;s--){var u=e.snapElements[s].left,o=u+e.snapElements[s].width,q=e.snapElements[s].top,x=q+e.snapElements[s].height;if(u-g<h&&h<o+g&&q-g<n&&n<x+g||u-g<h&&h<o+g&&q-g<l&&l<x+g||u-g<k&&k<o+g&&q-g<n&&n<x+g||u-g<k&&k<o+g&&q-g<l&&l<x+g){if("inner"!=f.snapMode){var w=Math.abs(q-l)<=g,z=Math.abs(x-n)<=g,t=Math.abs(u-k)<=g,O=Math.abs(o-h)<=g;w&&(c.position.top=e._convertPositionTo("relative",{top:q-e.helperProportions.height,left:0}).top-e.margins.top);
z&&(c.position.top=e._convertPositionTo("relative",{top:x,left:0}).top-e.margins.top);t&&(c.position.left=e._convertPositionTo("relative",{top:0,left:u-e.helperProportions.width}).left-e.margins.left);O&&(c.position.left=e._convertPositionTo("relative",{top:0,left:o}).left-e.margins.left)}var B=w||z||t||O;"outer"!=f.snapMode&&(w=Math.abs(q-n)<=g,z=Math.abs(x-l)<=g,t=Math.abs(u-h)<=g,O=Math.abs(o-k)<=g,w&&(c.position.top=e._convertPositionTo("relative",{top:q,left:0}).top-e.margins.top),z&&(c.position.top=
e._convertPositionTo("relative",{top:x-e.helperProportions.height,left:0}).top-e.margins.top),t&&(c.position.left=e._convertPositionTo("relative",{top:0,left:u}).left-e.margins.left),O&&(c.position.left=e._convertPositionTo("relative",{top:0,left:o-e.helperProportions.width}).left-e.margins.left));!e.snapElements[s].snapping&&(w||z||t||O||B)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,d,b.extend(e._uiHash(),{snapItem:e.snapElements[s].item}));e.snapElements[s].snapping=w||z||t||O||B}else e.snapElements[s].snapping&&
e.options.snap.release&&e.options.snap.release.call(e.element,d,b.extend(e._uiHash(),{snapItem:e.snapElements[s].item})),e.snapElements[s].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(){var d=b(this).data("draggable").options,d=b.makeArray(b(d.stack)).sort(function(c,d){return(parseInt(b(c).css("zIndex"),10)||0)-(parseInt(b(d).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;b(d).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+d.length}}});
b.ui.plugin.add("draggable","zIndex",{start:function(d,c){var e=b(c.helper),f=b(this).data("draggable").options;e.css("zIndex")&&(f._zIndex=e.css("zIndex"));e.css("zIndex",f.zIndex)},stop:function(d,c){var e=b(this).data("draggable").options;e._zIndex&&b(c.helper).css("zIndex",e._zIndex)}})})(jQuery);
(function(b){b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var d=this,c=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=c.values&&c.values.length||1,g=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);c.range&&(!0===c.range&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&2!==c.values.length&&(c.values=[c.values[0],c.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:"")));for(var h=e.length;h<f;h+=1)g.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=e.add(b(g.join("")).appendTo(d.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){c.disabled||b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(c){b(this).data("index.ui-slider-handle",
c)});this.handles.keydown(function(c){var e=b(this).data("index.ui-slider-handle"),g,h,f;if(!d.options.disabled){switch(c.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(c.preventDefault(),!d._keySliding&&(d._keySliding=!0,b(this).addClass("ui-state-active"),g=d._start(c,e),!1===g))return}g=d.options.step;d.options.values&&d.options.values.length?
h=f=d.values(e):h=f=d.value();switch(c.keyCode){case b.ui.keyCode.HOME:f=d._valueMin();break;case b.ui.keyCode.END:f=d._valueMax();break;case b.ui.keyCode.PAGE_UP:f=d._trimAlignValue(h+(d._valueMax()-d._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:f=d._trimAlignValue(h-(d._valueMax()-d._valueMin())/5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(h===d._valueMax())return;f=d._trimAlignValue(h+g);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(h===d._valueMin())return;f=d._trimAlignValue(h-
g)}d._slide(c,e,f)}}).keyup(function(c){var e=b(this).data("index.ui-slider-handle");d._keySliding&&(d._keySliding=!1,d._stop(c,e),d._change(c,e),b(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(d){var c=this.options,e,f,g,h,k;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();e=this._normValueFromMouse({x:d.pageX,y:d.pageY});f=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(c){var d=Math.abs(e-h.values(c));f>d&&(f=d,g=b(this),k=c)});!0===c.range&&this.values(1)===c.min&&(k+=1,g=b(this.handles[k]));if(!1===this._start(d,k))return!1;this._mouseSliding=
!0;h._handleIndex=k;g.addClass("ui-state-active").focus();c=g.offset();this._clickOffset=!b(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-c.left-g.width()/2,top:d.pageY-c.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(d,k,e);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(b){var c=this._normValueFromMouse({x:b.pageX,
y:b.pageY});this._slide(b,this._handleIndex,c);return!1},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var c,e;"horizontal"===this.orientation?(c=this.elementSize.width,e=b.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(c=this.elementSize.height,e=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=e/c;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);c=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+b*c)},_start:function(b,c){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());return this._trigger("start",b,e)},
_slide:function(b,c,e){var f,g,h;this.options.values&&this.options.values.length?(f=this.values(c?0:1),2===this.options.values.length&&!0===this.options.range&&(0===c&&e>f||1===c&&e<f)&&(e=f),e!==this.values(c)&&(g=this.values(),g[c]=e,h=this._trigger("slide",b,{handle:this.handles[c],value:e,values:g}),this.values(c?0:1),!1!==h&&this.values(c,e,!0))):e!==this.value()&&(h=this._trigger("slide",b,{handle:this.handles[c],value:e}),!1!==h&&this.value(e))},_stop:function(b,c){var e={handle:this.handles[c],
value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());this._trigger("stop",b,e)},_change:function(b,c){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(e.value=this.values(c),e.values=this.values());this._trigger("change",b,e)}},value:function(b){if(arguments.length)this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(d,c){var e,f,g;if(1<arguments.length)this.options.values[d]=this._trimAlignValue(c),this._refreshValue(),this._change(null,d);else{if(!arguments.length)return this._values();if(!b.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(d):this.value();e=this.options.values;f=arguments[0];for(g=0;g<e.length;g+=1)e[g]=this._trimAlignValue(f[g]),this._change(null,g);this._refreshValue()}},_setOption:function(d,c){var e,f=
0;b.isArray(this.options.values)&&(f=this.options.values.length);b.Widget.prototype._setOption.apply(this,arguments);switch(d){case "disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(e=0;e<f;e+=1)this._change(null,e);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var c,e;if(arguments.length)return c=this.options.values[b],c=this._trimAlignValue(c);c=this.options.values.slice();for(e=0;e<c.length;e+=1)c[e]=
this._trimAlignValue(c[e]);return c},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var c=0<this.options.step?this.options.step:1,e=(b-this._valueMin())%c,b=b-e;2*Math.abs(e)>=c&&(b+=0<e?c:-c);return parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var d=this.options.range,c=this.options,e=this,f=this._animateOff?!1:c.animate,g,h=
{},k,n,l,s;this.options.values&&this.options.values.length?this.handles.each(function(d){g=100*((e.values(d)-e._valueMin())/(e._valueMax()-e._valueMin()));h["horizontal"===e.orientation?"left":"bottom"]=g+"%";b(this).stop(1,1)[f?"animate":"css"](h,c.animate);!0===e.options.range&&("horizontal"===e.orientation?(0===d&&e.range.stop(1,1)[f?"animate":"css"]({left:g+"%"},c.animate),1===d&&e.range[f?"animate":"css"]({width:g-k+"%"},{queue:!1,duration:c.animate})):(0===d&&e.range.stop(1,1)[f?"animate":"css"]({bottom:g+
"%"},c.animate),1===d&&e.range[f?"animate":"css"]({height:g-k+"%"},{queue:!1,duration:c.animate})));k=g}):(n=this.value(),l=this._valueMin(),s=this._valueMax(),g=s!==l?100*((n-l)/(s-l)):0,h["horizontal"===e.orientation?"left":"bottom"]=g+"%",this.handle.stop(1,1)[f?"animate":"css"](h,c.animate),"min"===d&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:g+"%"},c.animate),"max"===d&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-g+"%"},{queue:!1,
duration:c.animate}),"min"===d&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:g+"%"},c.animate),"max"===d&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-g+"%"},{queue:!1,duration:c.animate}))}});b.extend(b.ui.slider,{version:"1.8.18"})})(jQuery);
(function(b){b.ui=b.ui||{};var d=/left|center|right/,c=/top|center|bottom/,e,f=b.fn.position,g=b.fn.offset;b.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);var g=b.extend({},g),k=b(g.of),n=k[0],l=(g.collision||"flip").split(" "),s=g.offset?g.offset.split(" "):[0,0],u,o,q;return 9===n.nodeType?(u=k.width(),o=k.height(),q={top:0,left:0}):n.setTimeout?(u=k.width(),o=k.height(),q={top:k.scrollTop(),left:k.scrollLeft()}):n.preventDefault?(g.at="left top",u=o=0,q={top:g.of.pageY,left:g.of.pageX}):
(u=k.outerWidth(),o=k.outerHeight(),q=k.offset()),b.each(["my","at"],function(){var b=(g[this]||"").split(" ");1===b.length&&(b=d.test(b[0])?b.concat(["center"]):c.test(b[0])?["center"].concat(b):["center","center"]);b[0]=d.test(b[0])?b[0]:"center";b[1]=c.test(b[1])?b[1]:"center";g[this]=b}),1===l.length&&(l[1]=l[0]),s[0]=parseInt(s[0],10)||0,1===s.length&&(s[1]=s[0]),s[1]=parseInt(s[1],10)||0,"right"===g.at[0]?q.left+=u:"center"===g.at[0]&&(q.left+=u/2),"bottom"===g.at[1]?q.top+=o:"center"===g.at[1]&&
(q.top+=o/2),q.left+=s[0],q.top+=s[1],this.each(function(){var c=b(this),d=c.outerWidth(),k=c.outerHeight(),n=parseInt(b.curCSS(this,"marginLeft",!0))||0,f=parseInt(b.curCSS(this,"marginTop",!0))||0,B=d+n+(parseInt(b.curCSS(this,"marginRight",!0))||0),I=k+f+(parseInt(b.curCSS(this,"marginBottom",!0))||0),D=b.extend({},q),H;"right"===g.my[0]?D.left-=d:"center"===g.my[0]&&(D.left-=d/2);"bottom"===g.my[1]?D.top-=k:"center"===g.my[1]&&(D.top-=k/2);e||(D.left=Math.round(D.left),D.top=Math.round(D.top));
H={left:D.left-n,top:D.top-f};b.each(["left","top"],function(c,e){b.ui.position[l[c]]&&b.ui.position[l[c]][e](D,{targetWidth:u,targetHeight:o,elemWidth:d,elemHeight:k,collisionPosition:H,collisionWidth:B,collisionHeight:I,offset:s,my:g.my,at:g.at})});b.fn.bgiframe&&c.bgiframe();c.offset(b.extend(D,{using:g.using}))})};b.ui.position={fit:{left:function(c,d){var e=b(window),e=d.collisionPosition.left+d.collisionWidth-e.width()-e.scrollLeft();c.left=0<e?c.left-e:Math.max(c.left-d.collisionPosition.left,
c.left)},top:function(c,d){var e=b(window),e=d.collisionPosition.top+d.collisionHeight-e.height()-e.scrollTop();c.top=0<e?c.top-e:Math.max(c.top-d.collisionPosition.top,c.top)}},flip:{left:function(c,d){if("center"!==d.at[0]){var e=b(window),e=d.collisionPosition.left+d.collisionWidth-e.width()-e.scrollLeft(),g="left"===d.my[0]?-d.elemWidth:"right"===d.my[0]?d.elemWidth:0,f="left"===d.at[0]?d.targetWidth:-d.targetWidth,u=-2*d.offset[0];c.left+=0>d.collisionPosition.left?g+f+u:0<e?g+f+u:0}},top:function(c,
d){if("center"!==d.at[1]){var e=b(window),e=d.collisionPosition.top+d.collisionHeight-e.height()-e.scrollTop(),g="top"===d.my[1]?-d.elemHeight:"bottom"===d.my[1]?d.elemHeight:0,f="top"===d.at[1]?d.targetHeight:-d.targetHeight,u=-2*d.offset[1];c.top+=0>d.collisionPosition.top?g+f+u:0<e?g+f+u:0}}}};b.offset.setOffset||(b.offset.setOffset=function(c,d){/static/.test(b.curCSS(c,"position"))&&(c.style.position="relative");var e=b(c),g=e.offset(),f=parseInt(b.curCSS(c,"top",!0),10)||0,u=parseInt(b.curCSS(c,
"left",!0),10)||0,g={top:d.top-g.top+f,left:d.left-g.left+u};"using"in d?d.using.call(c,g):e.css(g)},b.fn.offset=function(c){var d=this[0];return!d||!d.ownerDocument?null:c?this.each(function(){b.offset.setOffset(this,c)}):g.call(this)});(function(){var c=document.getElementsByTagName("body")[0],d=document.createElement("div"),g,f;g=document.createElement(c?"div":"body");f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};c&&b.extend(f,{position:"absolute",left:"-1000px",
top:"-1000px"});for(var s in f)g.style[s]=f[s];g.appendChild(d);f=c||document.documentElement;f.insertBefore(g,f.firstChild);d.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";d=b(d).offset(function(b,c){return c}).offset();g.innerHTML="";f.removeChild(g);c=d.top+d.left+(c?2E3:0);e=21<c&&22>c})()})(jQuery);
(function(b){var d=0;b.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var c=this,d=this.element[0].ownerDocument,f;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&
!c.element.propAttr("readOnly")){f=!1;var e=b.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._keyEvent("previous",d);break;case e.DOWN:c._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(f=!0,d.preventDefault());case e.TAB:if(!c.menu.active)break;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term);c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=
c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(b){f&&(f=!1,b.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blxur.autocomplete",function(b){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(b);c._change(b)},150))});this._initSource();this.menu=b("<ul></ul>").addClass("ui-autocomplete").appendTo(b(this.options.appendTo||
"body",d)[0]).mousedown(function(d){var e=c.menu.element[0];b(d.target).closest(".ui-menu-item").length||setTimeout(function(){b(document).one("mousedown",function(d){d.target!==c.element[0]&&d.target!==e&&!b.ui.contains(e,d.target)&&c.close()})},1);setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(b,d){var e=d.item.data("item.autocomplete");!1!==c._trigger("focus",b,{item:e})&&/^key/.test(b.originalEvent.type)&&c.element.val(e.value)},selected:function(b,f){var k=f.item.data("item.autocomplete"),
n=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=n,setTimeout(function(){c.previous=n;c.selectedItem=k},1));!1!==c._trigger("select",b,{item:k})&&c.element.val(k.value);c.term=c.element.val();c.close(b);c.selectedItem=k},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");b.fn.bgiframe&&this.menu.element.bgiframe();c.beforeunloadHandler=function(){c.element.removeAttr("autocomplete")};
b(window).bind("beforeunload",c.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();b(window).unbind("beforeunload",this.beforeunloadHandler);b.Widget.prototype.destroy.call(this)},_setOption:function(c,d){b.Widget.prototype._setOption.apply(this,arguments);"source"===c&&this._initSource();"appendTo"===c&&this.menu.element.appendTo(b(d||
"body",this.element[0].ownerDocument)[0]);"disabled"===c&&d&&this.xhr&&this.xhr.abort()},_initSource:function(){var c=this,d,f;b.isArray(this.options.source)?(d=this.options.source,this.source=function(c,f){f(b.ui.autocomplete.filter(d,c.term))}):"string"==typeof this.options.source?(f=this.options.source,this.source=function(d,e){c.xhr&&c.xhr.abort();c.xhr=b.ajax({url:f,data:d,dataType:"json",success:function(b){e(b)},error:function(){e([])}})}):this.source=this.options.source},search:function(b,
d){b=null!=b?b:this.element.val();this.term=this.element.val();if(b.length<this.options.minLength)return this.close(d);clearTimeout(this.closing);return!1===this._trigger("search",d)?void 0:this._search(b)},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:b},this._response())},_response:function(){var b=this,e=++d;return function(f){e===d&&b.__response(f);b.pending--;b.pending||b.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&
b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(c){return c.length&&c[0].label&&c[0].value?c:b.map(c,function(c){return"string"==typeof c?{label:c,value:c}:b.extend({label:c.label||
c.value,value:c.value||c.label},c)})},_suggest:function(c){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(d,c);this.menu.deactivate();this.menu.refresh();d.show();this._resizeMenu();d.position(b.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new b.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(c,d){var f=
this;b.each(d,function(b,d){f._renderItem(c,d)})},_renderItem:function(c,d){return b("<li></li>").data("item.autocomplete",d).append(b("<a></a>").text(d.label)).appendTo(c)},_move:function(b,d){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(b)||this.menu.last()&&/^next/.test(b))this.element.val(this.term),this.menu.deactivate();else this.menu[b](d);else this.search(null,d)},widget:function(){return this.menu.element},_keyEvent:function(b,d){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,
d),d.preventDefault()}});b.extend(b.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(c,d){var f=RegExp(b.ui.autocomplete.escapeRegex(d),"i");return b.grep(c,function(b){return f.test(b.label||b.value||b)})}})})(jQuery);
(function(b){b.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){b(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),d.select(c))});this.refresh()},refresh:function(){var d=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").mouseenter(function(c){d.activate(c,
b(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(b,c){this.deactivate();if(this.hasScroll()){var e=c.offset().top-this.element.offset().top,f=this.element.scrollTop(),g=this.element.height();0>e?this.element.scrollTop(f+e):e>=g&&this.element.scrollTop(f+e-g+c.height())}this.active=c.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",b,{item:c})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),
this._trigger("blur"),this.active=null)},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(b,c,e){this.active?(b=this.active[b+"All"](".ui-menu-item").eq(0),b.length?this.activate(e,b):this.activate(e,this.element.children(c))):this.activate(e,this.element.children(c))},
nextPage:function(d){if(this.hasScroll())if(!this.active||this.last())this.activate(d,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,e=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var d=b(this).offset().top-c-e+b(this).height();return 10>d&&-10<d});f.length||(f=this.element.children(".ui-menu-item:last"));this.activate(d,f)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},
previousPage:function(d){if(this.hasScroll())if(!this.active||this.first())this.activate(d,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,e=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var d=b(this).offset().top-c+e-b(this).height();return 10>d&&-10<d});f.length||(f=this.element.children(".ui-menu-item:first"));this.activate(d,f)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":
":first"))},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})})(jQuery);(function(){})(this);/*
 MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
(function(b,d,c,e){function f(c,d){this.options=b.extend(!0,{},g,d);this.input=c;this.$input=b(c);this._defaults=g;this._name="geocomplete";this.init()}var g={bounds:!0,map:!1,details:!1,detailsAttribute:"name",location:!1,mapOptions:{zoom:14,scrollwheel:!1,mapTypeId:"roadmap"},markerOptions:{draggable:!1},maxZoom:16,types:["geocode"]},h="street_address,route,intersection,political,country,administrative_area_level_1,administrative_area_level_2,administrative_area_level_3,colloquial_area,locality,sublocality,neighborhood,premise,subpremise,postal_code,natural_feature,airport,park,point_of_interest,post_box,street_number,floor,room,lat,lng,viewport,location,formatted_address,location_type,bounds".split(","),
k="id,url,website,vicinity,reference,rating,international_phone_number,icon,formatted_phone_number".split(",");b.extend(f.prototype,{init:function(){this.initMap();this.initMarker();this.initGeocoder();this.initDetails();this.initLocation()},initMap:function(){this.options.map&&(this.map="function"==typeof this.options.map.setCenter?this.options.map:new google.maps.Map(b(this.options.map)[0],this.options.mapOptions))},initMarker:function(){if(this.map){var c=b.extend(this.options.markerOptions,{map:this.map});
this.marker=new google.maps.Marker(c);google.maps.event.addListener(this.marker,"dragend",b.proxy(this.markerDragged,this))}},initGeocoder:function(){this.autocomplete=new google.maps.places.Autocomplete(this.input,{types:this.options.types,bounds:!0===this.options.bounds?null:this.options.bounds});this.geocoder=new google.maps.Geocoder;this.map&&!0===this.options.bounds&&this.autocomplete.bindTo("bounds",this.map);google.maps.event.addListener(this.autocomplete,"place_changed",b.proxy(this.placeChanged,
this));this.$input.keypress(function(b){if(13===b.keyCode)return!1});this.$input.bind("geocode",b.proxy(function(){this.find()},this))},initDetails:function(){function c(b){g[b]=d.find("["+e+"="+b+"]")}if(this.options.details){var d=b(this.options.details),e=this.options.detailsAttribute,g={};b.each(h,function(b,d){c(d);c(d+"_short")});b.each(k,function(b,d){c(d)});this.$details=d;this.details=g}},initLocation:function(){var b=this.options.location,c;b&&("string"==typeof b?this.find(b):(b instanceof
Array&&(c=new google.maps.LatLng(b[0],b[1])),b instanceof google.maps.LatLng&&(c=b),c&&this.geoocode({latLng:c})))},find:function(b){this.geocode({address:b||this.$input.val()})},geocode:function(c){this.options.bounds&&!c.bounds&&(c.bounds=!0===this.options.bounds?this.map&&this.map.getBounds():this.options.bounds);this.geocoder.geocode(c,b.proxy(this.handleGeocode,this))},handleGeocode:function(b,c){if(c===google.maps.GeocoderStatus.OK){var d=b[0];this.$input.val(d.formatted_address);this.update(d);
1<b.length&&this.trigger("geocode:multiple",b)}else this.trigger("geocode:error",c)},trigger:function(b,c){this.$input.trigger(b,[c])},center:function(b){b.viewport?(this.map.fitBounds(b.viewport),this.map.getZoom()>this.options.maxZoom&&this.map.setZoom(this.options.maxZoom)):(this.map.setZoom(this.options.maxZoom),this.map.setCenter(b.location));this.marker&&(this.marker.setPosition(b.location),this.marker.setAnimation(this.options.markerOptions.animation))},update:function(b){this.map&&this.center(b.geometry);
this.$details&&this.fillDetails(b);this.trigger("geocode:result",b)},fillDetails:function(c){var d={},e=c.geometry,g=e.viewport,f=e.bounds;b.each(c.address_components,function(b,c){var e=c.types[0];d[e]=c.long_name;d[e+"_short"]=c.short_name});b.each(k,function(b,e){d[e]=c[e]});b.extend(d,{formatted_address:c.formatted_address,location_type:e.location_type||"PLACES",viewport:g,bounds:f,location:e.location,lat:e.location.lat(),lng:e.location.lng()});b.each(this.details,b.proxy(function(b,c){this.setDetail(c,
d[b])},this));this.data=d},setDetail:function(b,c){c===e?c="":"function"==typeof c.toUrlValue&&(c=c.toUrlValue());b.is(":input")?b.val(c):b.text(c)},markerDragged:function(b){this.trigger("geocode:dragged",b.latLng)},resetMarker:function(){this.marker.setPosition(this.data.location);this.setDetail(this.details.lat,this.data.location.lat());this.setDetail(this.details.lng,this.data.location.lng())},placeChanged:function(){var b=this.autocomplete.getPlace();b.geometry?this.update(b):this.find(b.name)}});
b.fn.geocomplete=function(c){if("string"==typeof c){var d=b(this).data("plugin_geocomplete"),e=d[c];if("function"==typeof e)return e.apply(d,Array.prototype.slice.call(arguments,1));2==arguments.length&&(e=arguments[1]);return e}return this.each(function(){var d=b.data(this,"plugin_geocomplete");d||(d=new f(this,c),b.data(this,"plugin_geocomplete",d))})}})(jQuery,window,document);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),abbreviatedDayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),shortestDayNames:"Su,Mo,Tu,We,Th,Fr,Sa".split(","),firstLetterDayNames:"S,M,T,W,T,F,S".split(","),monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),abbreviatedMonthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,
may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,
second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",
MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(b){for(var d=Date.CultureInfo.monthNames,c=Date.CultureInfo.abbreviatedMonthNames,b=b.toLowerCase(),e=0;e<d.length;e++)if(d[e].toLowerCase()==b||c[e].toLowerCase()==b)return e;return-1};Date.getDayNumberFromName=function(b){for(var d=Date.CultureInfo.dayNames,c=Date.CultureInfo.abbreviatedDayNames,b=b.toLowerCase(),e=0;e<d.length;e++)if(d[e].toLowerCase()==b||c[e].toLowerCase()==b)return e;return-1};
Date.isLeapYear=function(b){return 0===b%4&&0!==b%100||0===b%400};Date.getDaysInMonth=function(b,d){return[31,Date.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][d]};Date.getTimezoneOffset=function(b,d){return d?Date.CultureInfo.abbreviatedTimeZoneDST[b.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[b.toUpperCase()]};
Date.getTimezoneAbbreviation=function(b,d){var c=d?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,e;for(e in c)if(c[e]===b)return e;return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(b){if(isNaN(this))throw Error(this);if(b instanceof Date&&!isNaN(b))return this>b?1:this<b?-1:0;throw new TypeError(b);};Date.prototype.equals=function(b){return 0===this.compareTo(b)};
Date.prototype.between=function(b,d){var c=this.getTime();return c>=b.getTime()&&c<=d.getTime()};Date.prototype.addMilliseconds=function(b){this.setMilliseconds(this.getMilliseconds()+b);return this};Date.prototype.addSeconds=function(b){return this.addMilliseconds(1E3*b)};Date.prototype.addMinutes=function(b){return this.addMilliseconds(6E4*b)};Date.prototype.addHours=function(b){return this.addMilliseconds(36E5*b)};Date.prototype.addDays=function(b){return this.addMilliseconds(864E5*b)};
Date.prototype.addWeeks=function(b){return this.addMilliseconds(6048E5*b)};Date.prototype.addMonths=function(b){var d=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(d,this.getDaysInMonth()));return this};Date.prototype.addYears=function(b){return this.addMonths(12*b)};
Date.prototype.add=function(b){if("number"==typeof b)return this._orient=b,this;if(b.millisecond||b.milliseconds)this.addMilliseconds(b.millisecond||b.milliseconds);if(b.second||b.seconds)this.addSeconds(b.second||b.seconds);if(b.minute||b.minutes)this.addMinutes(b.minute||b.minutes);if(b.hour||b.hours)this.addHours(b.hour||b.hours);if(b.month||b.months)this.addMonths(b.month||b.months);if(b.year||b.years)this.addYears(b.year||b.years);if(b.day||b.days)this.addDays(b.day||b.days);return this};
Date._validate=function(b,d,c,e){if("number"!=typeof b)throw new TypeError(b+" is not a Number.");if(b<d||b>c)throw new RangeError(b+" is not a valid value for "+e+".");return!0};Date.validateMillisecond=function(b){return Date._validate(b,0,999,"milliseconds")};Date.validateSecond=function(b){return Date._validate(b,0,59,"seconds")};Date.validateMinute=function(b){return Date._validate(b,0,59,"minutes")};Date.validateHour=function(b){return Date._validate(b,0,23,"hours")};
Date.validateDay=function(b,d,c){return Date._validate(b,1,Date.getDaysInMonth(d,c),"days")};Date.validateMonth=function(b){return Date._validate(b,0,11,"months")};Date.validateYear=function(b){return Date._validate(b,1,9999,"seconds")};
Date.prototype.set=function(b){!b.millisecond&&0!==b.millisecond&&(b.millisecond=-1);!b.second&&0!==b.second&&(b.second=-1);!b.minute&&0!==b.minute&&(b.minute=-1);!b.hour&&0!==b.hour&&(b.hour=-1);!b.day&&0!==b.day&&(b.day=-1);!b.month&&0!==b.month&&(b.month=-1);!b.year&&0!==b.year&&(b.year=-1);-1!=b.millisecond&&Date.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds());-1!=b.second&&Date.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds());
-1!=b.minute&&Date.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes());-1!=b.hour&&Date.validateHour(b.hour)&&this.addHours(b.hour-this.getHours());-1!==b.month&&Date.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth());-1!=b.year&&Date.validateYear(b.year)&&this.addYears(b.year-this.getFullYear());-1!=b.day&&Date.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate());b.timezone&&this.setTimezone(b.timezone);b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset);
return this};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.isLeapYear=function(){var b=this.getFullYear();return 0===b%4&&0!==b%100||0===b%400};Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};
Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(b,d){var c=(b-this.getDay()+7*(d||1))%7;return this.addDays(0===c?c+7*(d||1):c)};Date.prototype.moveToMonth=function(b,d){var c=(b-this.getMonth()+12*(d||1))%12;return this.addMonths(0===c?c+12*(d||1):c)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864E5)};
Date.prototype.getWeekOfYear=function(b){var d=this.getFullYear(),c=this.getMonth(),e=this.getDate(),b=b||Date.CultureInfo.firstDayOfWeek,f=8-(new Date(d,0,1)).getDay();8==f&&(f=1);c=(Date.UTC(d,c,e,0,0,0)-Date.UTC(d,0,1,0,0,0))/864E5+1;c=Math.floor((c-f+7)/7);c===b&&(d--,d=8-(new Date(d,0,1)).getDay(),c=2==d||8==d?53:52);return c};Date.prototype.isDST=function(){console.log("isDST");return"D"==this.toString().match(/(E|C|M|P)(S|D)T/)[2]};
Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(b){var d=this.getTimezoneOffset();this.addMinutes(-6*Number(b)/10-d);return this};Date.prototype.setTimezone=function(b){return this.setTimezoneOffset(Date.getTimezoneOffset(b))};Date.prototype.getUTCOffset=function(){var b=-10*this.getTimezoneOffset()/6;if(0>b)return b=(b-1E4).toString(),b[0]+b.substr(2);b=(b+1E4).toString();return"+"+b.substr(1)};
Date.prototype.getDayName=function(b){return b?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(b){return b?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString=Date.prototype.toString;
Date.prototype.toString=function(b){var d=this,c=function(b){return 1==b.toString().length?"0"+b:b};return b?b.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(b){switch(b){case "hh":return c(13>d.getHours()?d.getHours():d.getHours()-12);case "h":return 13>d.getHours()?d.getHours():d.getHours()-12;case "HH":return c(d.getHours());case "H":return d.getHours();case "mm":return c(d.getMinutes());case "m":return d.getMinutes();case "ss":return c(d.getSeconds());case "s":return d.getSeconds();
case "yyyy":return d.getFullYear();case "yy":return d.getFullYear().toString().substring(2,4);case "dddd":return d.getDayName();case "ddd":return d.getDayName(!0);case "dd":return c(d.getDate());case "d":return d.getDate().toString();case "MMMM":return d.getMonthName();case "MMM":return d.getMonthName(!0);case "MM":return c(d.getMonth()+1);case "M":return d.getMonth()+1;case "t":return 12>d.getHours()?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case "tt":return 12>
d.getHours()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case "zzz":case "zz":case "z":return""}}):this._toString()};Date.now=function(){return new Date};Date.today=function(){return Date.now().clearTime()};Date.prototype._orient=1;Date.prototype.next=function(){this._orient=1;return this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;return this};Date.prototype._is=!1;Date.prototype.is=function(){this._is=!0;return this};
Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var b={};b[this._dateElement]=this;return Date.now().add(b)};Number.prototype.ago=function(){var b={};b[this._dateElement]=-1*this;return Date.now().add(b)};
(function(){for(var b=Date.prototype,d=Number.prototype,c="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),f="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),g=function(b){return function(){return this._is?(this._is=!1,this.getDay()==b):this.moveToDayOfWeek(b,this._orient)}},h=0;h<c.length;h++)b[c[h]]=b[c[h].substring(0,3)]=g(h);c=function(b){return function(){return this._is?
(this._is=!1,this.getMonth()===b):this.moveToMonth(b,this._orient)}};for(g=0;g<e.length;g++)b[e[g]]=b[e[g].substring(0,3)]=c(g);c=function(b){return function(){"s"!=b.substring(b.length-1)&&(b+="s");return this["add"+b](this._orient)}};g=function(b){return function(){this._dateElement=b;return this}};for(h=0;h<f.length;h++)e=f[h].toLowerCase(),b[e]=b[e+"s"]=c(f[h]),d[e]=d[e+"s"]=g(e)})();Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};
Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};
Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};
(function(){Date.Parsing={Exception:function(b){this.message="Parse error at '"+b.substring(0,10)+" ...'"}};for(var b=Date.Parsing,d=b.Operators={rtoken:function(c){return function(d){var e=d.match(c);if(e)return[e[0],d.substring(e[0].length)];throw new b.Exception(d);}},token:function(){return function(b){return d.rtoken(RegExp("^s*"+b+"s*"))(b)}},stoken:function(b){return d.rtoken(RegExp("^"+b))},until:function(b){return function(c){for(var d=[],e=null;c.length;){try{e=b.call(this,c)}catch(f){d.push(e[0]);
c=e[1];continue}break}return[d,c]}},many:function(b){return function(c){for(var d=[],e=null;c.length;){try{e=b.call(this,c)}catch(f){break}d.push(e[0]);c=e[1]}return[d,c]}},optional:function(b){return function(c){var d=null;try{d=b.call(this,c)}catch(e){return[null,c]}return[d[0],d[1]]}},not:function(c){return function(d){try{c.call(this,d)}catch(e){return[null,d]}throw new b.Exception(d);}},ignore:function(b){return b?function(c){var d=null,d=b.call(this,c);return[null,d[1]]}:null},product:function(){for(var b=
arguments[0],c=Array.prototype.slice.call(arguments,1),e=[],f=0;f<b.length;f++)e.push(d.each(b[f],c));return e},cache:function(c){var d={},e=null;return function(f){try{e=d[f]=d[f]||c.call(this,f)}catch(l){e=d[f]=l}if(e instanceof b.Exception)throw e;return e}},any:function(){var c=arguments;return function(d){for(var e=null,f=0;f<c.length;f++)if(null!=c[f]){try{e=c[f].call(this,d)}catch(l){e=null}if(e)return e}throw new b.Exception(d);}},each:function(){var c=arguments;return function(d){for(var e=
[],f=null,l=0;l<c.length;l++)if(null!=c[l]){try{f=c[l].call(this,d)}catch(s){throw new b.Exception(d);}e.push(f[0]);d=f[1]}return[e,d]}},all:function(){var b=b;return b.each(b.optional(arguments))},sequence:function(c,e,f){e=e||d.rtoken(/^\s*/);f=f||null;return 1==c.length?c[0]:function(d){for(var l=null,s=null,u=[],o=0;o<c.length;o++){try{l=c[o].call(this,d)}catch(q){break}u.push(l[0]);try{s=e.call(this,l[1])}catch(x){s=null;break}d=s[1]}if(!l)throw new b.Exception(d);if(s)throw new b.Exception(s[1]);
if(f)try{l=f.call(this,l[1])}catch(w){throw new b.Exception(l[1]);}return[u,l?l[1]:d]}},between:function(b,c,e){var e=e||b,f=d.each(d.ignore(b),c,d.ignore(e));return function(b){b=f.call(this,b);return[[b[0][0],r[0][2]],b[1]]}},list:function(b,c,e){c=c||d.rtoken(/^\s*/);e=e||null;return b instanceof Array?d.each(d.product(b.slice(0,-1),d.ignore(c)),b.slice(-1),d.ignore(e)):d.each(d.many(d.each(b,d.ignore(c))),px,d.ignore(e))},set:function(c,e,f){e=e||d.rtoken(/^\s*/);f=f||null;return function(n){for(var l=
null,s=l=null,u=null,o=[[],n],q=!1,x=0;x<c.length;x++){l=s=null;q=1==c.length;try{l=c[x].call(this,n)}catch(w){continue}u=[[l[0]],l[1]];if(0<l[1].length&&!q)try{s=e.call(this,l[1])}catch(z){q=!0}else q=!0;!q&&0===s[1].length&&(q=!0);if(!q){l=[];for(q=0;q<c.length;q++)x!=q&&l.push(c[q]);l=d.set(l,e).call(this,s[1]);0<l[0].length&&(u[0]=u[0].concat(l[0]),u[1]=l[1])}u[1].length<o[1].length&&(o=u);if(0===o[1].length)break}if(0===o[0].length)return o;if(f){try{s=f.call(this,o[1])}catch(t){throw new b.Exception(o[1]);
}o[1]=s[1]}return o}},forward:function(b,c){return function(d){return b[c].call(this,d)}},replace:function(b,c){return function(d){d=b.call(this,d);return[c,d[1]]}},process:function(b,c){return function(d){d=b.call(this,d);return[c.call(this,d[0]),d[1]]}},min:function(c,d){return function(e){var f=d.call(this,e);if(f[0].length<c)throw new b.Exception(e);return f}}},c=function(b){return function(){var c=null,d=[];1<arguments.length?c=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&
(c=arguments[0]);if(c)for(var e=c.shift();0<e.length;)return c.unshift(e[0]),d.push(b.apply(null,c)),c.shift(),d;else return b.apply(null,arguments)}},e="optional not ignore cache".split(/\s/),f=0;f<e.length;f++)d[e[f]]=c(d[e[f]]);c=function(b){return function(){return arguments[0]instanceof Array?b.apply(null,arguments[0]):b.apply(null,arguments)}};e="each any all".split(/\s/);for(f=0;f<e.length;f++)d[e[f]]=c(d[e[f]])})();
(function(){var b=function(c){for(var d=[],e=0;e<c.length;e++)c[e]instanceof Array?d=d.concat(b(c[e])):c[e]&&d.push(c[e]);return d};Date.Grammar={};Date.Translator={hour:function(b){return function(){this.hour=Number(b)}},minute:function(b){return function(){this.minute=Number(b)}},second:function(b){return function(){this.second=Number(b)}},meridian:function(b){return function(){this.meridian=b.slice(0,1).toLowerCase()}},timezone:function(b){return function(){var c=b.replace(/[^\d\+\-]/g,"");c.length?
this.timezoneOffset=Number(c):this.timezone=b.toLowerCase()}},day:function(b){var c=b[0];return function(){this.day=Number(c.match(/\d+/)[0])}},month:function(b){return function(){this.month=3==b.length?Date.getMonthNumberFromName(b):Number(b)-1}},year:function(b){return function(){var c=Number(b);this.year=2<b.length?c:c+(c+2E3<Date.CultureInfo.twoDigitYearMax?2E3:1900)}},rday:function(b){return function(){switch(b){case "yesterday":this.days=-1;break;case "tomorrow":this.days=1;break;case "today":this.days=
0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(b){var b=b instanceof Array?b:[b],c=new Date;this.year=c.getFullYear();this.month=c.getMonth();this.day=1;for(c=this.second=this.minute=this.hour=0;c<b.length;c++)b[c]&&b[c].call(this);this.hour="p"==this.meridian&&13>this.hour?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);
this.timezone?b.set({timezone:this.timezone}):this.timezoneOffset&&b.set({timezoneOffset:this.timezoneOffset});return b},finish:function(c){c=c instanceof Array?b(c):[c];if(0===c.length)return null;for(var d=0;d<c.length;d++)"function"==typeof c[d]&&c[d].call(this);if(this.now)return new Date;c=Date.today();if(null!=this.days||this.orient||this.operator){var e,g;g="past"==this.orient||"subtract"==this.operator?-1:1;this.weekday&&(this.unit="day",d=Date.getDayNumberFromName(this.weekday)-c.getDay(),
e=7,this.days=d?(d+g*e)%e:g*e);this.month&&(this.unit="month",d=this.month-c.getMonth(),e=12,this.months=d?(d+g*e)%e:g*e,this.month=null);this.unit||(this.unit="day");if(null==this[this.unit+"s"]||null!=this.operator)this.value||(this.value=1),"week"==this.unit&&(this.unit="day",this.value*=7),this[this.unit+"s"]=this.value*g;return c.add(this)}this.meridian&&this.hour&&(this.hour=13>this.hour&&"p"==this.meridian?this.hour+12:this.hour);this.weekday&&!this.day&&(this.day=c.addDays(Date.getDayNumberFromName(this.weekday)-
c.getDay()).getDate());this.month&&!this.day&&(this.day=1);return c.set(this)}};var d=Date.Parsing.Operators,c=Date.Grammar,e=Date.Translator,f;c.datePartDelimiter=d.rtoken(/^([\s\-\.\,\/\x27]+)/);c.timePartDelimiter=d.stoken(":");c.whiteSpace=d.rtoken(/^\s*/);c.generalDelimiter=d.rtoken(/^(([\s\,]|at|on)+)/);var g={};c.ctoken=function(b){var c=g[b];if(!c){for(var c=Date.CultureInfo.regexPatterns,e=b.split(/\s+/),f=[],h=0;h<e.length;h++)f.push(d.replace(d.rtoken(c[e[h]]),e[h]));c=g[b]=d.any.apply(null,
f)}return c};c.ctoken2=function(b){return d.rtoken(Date.CultureInfo.regexPatterns[b])};c.h=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),e.hour));c.hh=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2])/),e.hour));c.H=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),e.hour));c.HH=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3])/),e.hour));c.m=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),e.minute));c.mm=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),e.minute));c.s=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),
e.second));c.ss=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),e.second));c.hms=d.cache(d.sequence([c.H,c.mm,c.ss],c.timePartDelimiter));c.t=d.cache(d.process(c.ctoken2("shortMeridian"),e.meridian));c.tt=d.cache(d.process(c.ctoken2("longMeridian"),e.meridian));c.z=d.cache(d.process(d.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),e.timezone));c.zz=d.cache(d.process(d.rtoken(/^(\+|\-)\s*\d\d\d\d/),e.timezone));c.zzz=d.cache(d.process(c.ctoken2("timezone"),e.timezone));c.timeSuffix=d.each(d.ignore(c.whiteSpace),d.set([c.tt,
c.zzz]));c.time=d.each(d.optional(d.ignore(d.stoken("T"))),c.hms,c.timeSuffix);c.d=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1]|\d)/),d.optional(c.ctoken2("ordinalSuffix"))),e.day));c.dd=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1])/),d.optional(c.ctoken2("ordinalSuffix"))),e.day));c.ddd=c.dddd=d.cache(d.process(c.ctoken("sun mon tue wed thu fri sat"),function(b){return function(){this.weekday=b}}));c.M=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d|\d)/),e.month));c.MM=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d)/),
e.month));c.MMM=c.MMMM=d.cache(d.process(c.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),e.month));c.y=d.cache(d.process(d.rtoken(/^(\d\d?)/),e.year));c.yy=d.cache(d.process(d.rtoken(/^(\d\d)/),e.year));c.yyy=d.cache(d.process(d.rtoken(/^(\d\d?\d?\d?)/),e.year));c.yyyy=d.cache(d.process(d.rtoken(/^(\d\d\d\d)/),e.year));f=function(){return d.each(d.any.apply(null,arguments),d.not(c.ctoken2("timeContext")))};c.day=f(c.d,c.dd);c.month=f(c.M,c.MMM);c.year=f(c.yyyy,c.yy);c.orientation=d.process(c.ctoken("past future"),
function(b){return function(){this.orient=b}});c.operator=d.process(c.ctoken("add subtract"),function(b){return function(){this.operator=b}});c.rday=d.process(c.ctoken("yesterday tomorrow today now"),e.rday);c.unit=d.process(c.ctoken("minute hour day week month year"),function(b){return function(){this.unit=b}});c.value=d.process(d.rtoken(/^\d\d?(st|nd|rd|th)?/),function(b){return function(){this.value=b.replace(/\D/g,"")}});c.expression=d.set([c.rday,c.operator,c.value,c.unit,c.orientation,c.ddd,
c.MMM]);f=function(){return d.set(arguments,c.datePartDelimiter)};c.mdy=f(c.ddd,c.month,c.day,c.year);c.ymd=f(c.ddd,c.year,c.month,c.day);c.dmy=f(c.ddd,c.day,c.month,c.year);c.date=function(b){return(c[Date.CultureInfo.dateElementOrder]||c.mdy).call(this,b)};c.format=d.process(d.many(d.any(d.process(d.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(c[b])return c[b];throw Date.Parsing.Exception(b);}),d.process(d.rtoken(/^[^dMyhHmstz]+/),function(b){return d.ignore(d.stoken(b))}))),
function(b){return d.process(d.each.apply(null,b),e.finishExact)});var h={};c.formats=function(b){if(b instanceof Array){for(var e=[],g=0;g<b.length;g++)e.push(h[b[g]]=h[b[g]]||c.format(b[g])[0]);return d.any.apply(null,e)}return h[b]=h[b]||c.format(b)[0]};c._formats=c.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);c._start=d.process(d.set([c.date,c.time,c.expression],c.generalDelimiter,c.whiteSpace),e.finish);c.start=function(b){try{var d=c._formats.call({},
b);if(0===d[1].length)return d}catch(e){}return c._start.call({},b)}})();Date._parse=Date.parse;Date.parse=function(b){var d=null;if(!b)return null;try{d=Date.Grammar.start.call({},b)}catch(c){return null}return 0===d[1].length?d[0]:null};Date.getParseFunction=function(b){var d=Date.Grammar.formats(b);return function(b){var e=null;try{e=d.call({},b)}catch(f){return null}return 0===e[1].length?e[0]:null}};Date.parseExact=function(b,d){return Date.getParseFunction(d)(b)};(function(b,d,c){b.fn.jScrollPane=function(e){function f(e,f){function k(d){var y,J,f,aa,l,Ca=!1,h=!1;v=d;if(K===c)aa=e.scrollTop(),l=e.scrollLeft(),e.css({overflow:"hidden",padding:0}),P=e.innerWidth()+ba,G=e.innerHeight(),e.width(P),K=b('<div class="jspPane" />').css("padding",ua).append(e.children()),L=b('<div class="jspContainer" />').css({width:P+"px",height:G+"px"}).append(K).appendTo(e);else{e.css("width","");Ca=v.stickToBottom&&Q();h=v.stickToRight&&ta();if(f=e.innerWidth()+ba!=P||e.outerHeight()!=
G)P=e.innerWidth()+ba,G=e.innerHeight(),L.css({width:P+"px",height:G+"px"});if(!f&&oa==F&&K.outerHeight()==E){e.width(P);return}oa=F;K.css("width","");e.width(P);L.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}K.css("overflow","auto");F=d.contentWidth?d.contentWidth:K[0].scrollWidth;E=K[0].scrollHeight;K.css("overflow","");wa=F/P;va=E/G;ha=1<va;Z=1<wa;if(!Z&&!ha)e.removeClass("jspScrollable"),K.css({top:0,width:L.width()-ba}),L.unbind(Da),K.find(":input,a").unbind("focus.jsp"),e.attr("tabindex",
"-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),t();else{e.addClass("jspScrollable");if(d=v.maintainPosition&&(R||U))y=j(),J=C();n();s();o();d&&(A(h?F-P:y,!1),m(Ca?E-G:J,!1));xa();ya();za();v.enableKeyboardNavigation&&Aa();v.clickOnTrack&&z();Ba();v.hijackInternalLinks&&ra()}v.autoReinitialise&&!pa?pa=setInterval(function(){k(v)},v.autoReinitialiseDelay):!v.autoReinitialise&&pa&&clearInterval(pa);aa&&e.scrollTop(0)&&m(aa,!1);l&&e.scrollLeft(0)&&A(l,!1);e.trigger("jsp-initialised",
[Z||ha])}function n(){ha&&(L.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),da=L.find(">.jspVerticalBar"),V=da.find(">.jspTrack"),X=V.find(">.jspDrag"),v.showArrows&&(la=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",x(0,-1)).bind("click.jsp",ea),ma=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
x(0,1)).bind("click.jsp",ea),v.arrowScrollOnHover&&(la.bind("mouseover.jsp",x(0,-1,la)),ma.bind("mouseover.jsp",x(0,1,ma))),q(V,v.verticalArrowPositions,la,ma)),ia=G,L.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ia=ia-b(this).outerHeight()}),X.hover(function(){X.addClass("jspHover")},function(){X.removeClass("jspHover")}).bind("mousedown.jsp",function(c){b("html").bind("dragstart.jsp selectstart.jsp",ea);X.addClass("jspActive");var d=c.pageY-X.position().top;
b("html").bind("mousemove.jsp",function(b){B(b.pageY-d,false)}).bind("mouseup.jsp mouseleave.jsp",O);return false}),l())}function l(){V.height(ia+"px");R=0;na=v.verticalGutter+V.outerWidth();K.width(P-na-ba);try{0===da.position().left&&K.css("margin-left",na+"px")}catch(b){}}function s(){Z&&(L.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),
b('<div class="jspCap jspCapRight" />'))),sa=L.find(">.jspHorizontalBar"),S=sa.find(">.jspTrack"),T=S.find(">.jspDrag"),v.showArrows&&(fa=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",x(-1,0)).bind("click.jsp",ea),ca=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",x(1,0)).bind("click.jsp",ea),v.arrowScrollOnHover&&(fa.bind("mouseover.jsp",x(-1,0,fa)),ca.bind("mouseover.jsp",x(1,0,ca))),q(S,v.horizontalArrowPositions,fa,ca)),T.hover(function(){T.addClass("jspHover")},
function(){T.removeClass("jspHover")}).bind("mousedown.jsp",function(c){b("html").bind("dragstart.jsp selectstart.jsp",ea);T.addClass("jspActive");var d=c.pageX-T.position().left;b("html").bind("mousemove.jsp",function(b){D(b.pageX-d,false)}).bind("mouseup.jsp mouseleave.jsp",O);return false}),Y=L.innerWidth(),u())}function u(){L.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){Y-=b(this).outerWidth()});S.width(Y+"px");U=0}function o(){if(Z&&ha){var c=S.outerHeight(),
d=V.outerWidth();ia-=c;b(sa).find(">.jspCap:visible,>.jspArrow").each(function(){Y+=b(this).outerWidth()});Y-=d;G-=d;P-=c;S.parent().append(b('<div class="jspCorner" />').css("width",c+"px"));l();u()}Z&&K.width(L.outerWidth()-ba+"px");E=K.outerHeight();va=E/G;Z&&(ja=Math.ceil(1/wa*Y),ja>v.horizontalDragMaxWidth?ja=v.horizontalDragMaxWidth:ja<v.horizontalDragMinWidth&&(ja=v.horizontalDragMinWidth),T.width(ja+"px"),N=Y-ja,H(U));ha&&(ka=Math.ceil(1/va*ia),ka>v.verticalDragMaxHeight?ka=v.verticalDragMaxHeight:
ka<v.verticalDragMinHeight&&(ka=v.verticalDragMinHeight),X.height(ka+"px"),W=ia-ka,I(R))}function q(b,c,d,e){var y="before",j="after";"os"==c&&(c=/Mac/.test(navigator.platform)?"after":"split");c==y?j=c:c==j&&(y=c,c=d,d=e,e=c);b[y](d)[j](e)}function x(b,c,d){return function(){w(b,c,this,d);this.blur();return!1}}function w(c,d,e,y){var e=b(e).addClass("jspActive"),j,g,J=!0,f=function(){0!==c&&M.scrollByX(c*v.arrowButtonSpeed);0!==d&&M.scrollByY(d*v.arrowButtonSpeed);g=setTimeout(f,J?v.initialDelay:
v.arrowRepeatFreq);J=!1};f();j=y?"mouseout.jsp":"mouseup.jsp";y=y||b("html");y.bind(j,function(){e.removeClass("jspActive");g&&clearTimeout(g);g=null;y.unbind(j)})}function z(){t();ha&&V.bind("mousedown.jsp",function(d){if(d.originalTarget===c||d.originalTarget==d.currentTarget){var e=b(this),y=e.offset(),j=d.pageY-y.top-R,g,J=!0,f=function(){var b=e.offset(),b=d.pageY-b.top-ka/2,c=G*v.scrollPagePercent,y=W*c/(E-G);if(0>j)R-y>b?M.scrollByY(-c):B(b);else if(0<j)R+y<b?M.scrollByY(c):B(b);else{aa();
return}g=setTimeout(f,J?v.initialDelay:v.trackClickRepeatFreq);J=!1},aa=function(){g&&clearTimeout(g);g=null;b(document).unbind("mouseup.jsp",aa)};f();b(document).bind("mouseup.jsp",aa);return!1}});Z&&S.bind("mousedown.jsp",function(d){if(d.originalTarget===c||d.originalTarget==d.currentTarget){var e=b(this),y=e.offset(),j=d.pageX-y.left-U,g,J=!0,f=function(){var b=e.offset(),b=d.pageX-b.left-ja/2,c=P*v.scrollPagePercent,y=N*c/(F-P);if(0>j)U-y>b?M.scrollByX(-c):D(b);else if(0<j)U+y<b?M.scrollByX(c):
D(b);else{aa();return}g=setTimeout(f,J?v.initialDelay:v.trackClickRepeatFreq);J=!1},aa=function(){g&&clearTimeout(g);g=null;b(document).unbind("mouseup.jsp",aa)};f();b(document).bind("mouseup.jsp",aa);return!1}})}function t(){S&&S.unbind("mousedown.jsp");V&&V.unbind("mousedown.jsp")}function O(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");X&&X.removeClass("jspActive");T&&T.removeClass("jspActive")}function B(b,d){ha&&((0>b?b=0:b>W&&(b=W),d===c&&(d=v.animateScroll),
d)?M.animate(X,"top",b,I):(X.css("top",b),I(b)))}function I(b){b===c&&(b=X.position().top);L.scrollTop(0);R=b;var d=0===R,j=R==W,b=-(b/W)*(E-G);if(qa!=d||J!=j)qa=d,J=j,e.trigger("jsp-arrow-change",[qa,J,y,aa]);v.showArrows&&(la[d?"addClass":"removeClass"]("jspDisabled"),ma[j?"addClass":"removeClass"]("jspDisabled"));K.css("top",b);e.trigger("jsp-scroll-y",[-b,d,j]).trigger("scroll")}function D(b,d){Z&&((0>b?b=0:b>N&&(b=N),d===c&&(d=v.animateScroll),d)?M.animate(T,"left",b,H):(T.css("left",b),H(b)))}
function H(b){b===c&&(b=T.position().left);L.scrollTop(0);U=b;var d=0===U,j=U==N,b=-(b/N)*(F-P);if(y!=d||aa!=j)y=d,aa=j,e.trigger("jsp-arrow-change",[qa,J,y,aa]);v.showArrows&&(fa[d?"addClass":"removeClass"]("jspDisabled"),ca[j?"addClass":"removeClass"]("jspDisabled"));K.css("left",b);e.trigger("jsp-scroll-x",[-b,d,j]).trigger("scroll")}function m(b,c){B(b/(E-G)*W,c)}function A(b,c){D(b/(F-P)*N,c)}function ga(c,d,e){var y,g,J=0,f=0,aa,Q,t;try{y=b(c)}catch(l){return}g=y.outerHeight();c=y.outerWidth();
L.scrollTop(0);for(L.scrollLeft(0);!y.is(".jspPane");)if(J+=y.position().top,f+=y.position().left,y=y.offsetParent(),/^body|html$/i.test(y[0].nodeName))return;y=C();aa=y+G;J<y||d?Q=J-v.verticalGutter:J+g>aa&&(Q=J-G+g+v.verticalGutter);Q&&m(Q,e);J=j();Q=J+P;f<J||d?t=f-v.horizontalGutter:f+c>Q&&(t=f-P+c+v.horizontalGutter);t&&A(t,e)}function j(){return-K.position().left}function C(){return-K.position().top}function Q(){var b=E-G;return 20<b&&10>b-C()}function ta(){var b=F-P;return 20<b&&10>b-j()}function ya(){L.unbind(Da).bind(Da,
function(b,c,d,e){b=U;c=R;M.scrollBy(d*v.mouseWheelSpeed,-e*v.mouseWheelSpeed,!1);return b==U&&c==R})}function ea(){return!1}function xa(){K.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(b){ga(b.target,!1)})}function Aa(){function c(){var b=U,e=R;switch(d){case 40:M.scrollByY(v.keyboardSpeed,!1);break;case 38:M.scrollByY(-v.keyboardSpeed,!1);break;case 34:case 32:M.scrollByY(G*v.scrollPagePercent,!1);break;case 33:M.scrollByY(-G*v.scrollPagePercent,!1);break;case 39:M.scrollByX(v.keyboardSpeed,
!1);break;case 37:M.scrollByX(-v.keyboardSpeed,!1)}return y=b!=U||e!=R}var d,y,j=[];Z&&j.push(sa[0]);ha&&j.push(da[0]);K.focus(function(){e.focus()});e.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(!(e.target!==this&&(!j.length||!b(e.target).closest(j).length))){var g=U,J=R;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=e.keyCode;c();break;case 35:m(E-G);d=null;break;case 36:m(0),d=null}y=e.keyCode==d&&g!=U||J!=R;return!y}}).bind("keypress.jsp",
function(b){b.keyCode==d&&c();return!y});v.hideFocus?(e.css("outline","none"),"hideFocus"in L[0]&&e.attr("hideFocus",!0)):(e.css("outline",""),"hideFocus"in L[0]&&e.attr("hideFocus",!1))}function Ba(){if(location.hash&&1<location.hash.length){var c,d,e=escape(location.hash.substr(1));try{c=b("#"+e+', a[name="'+e+'"]')}catch(y){return}c.length&&K.find(e)&&(0===L.scrollTop()?d=setInterval(function(){0<L.scrollTop()&&(ga(c,!0),b(document).scrollTop(L.position().top),clearInterval(d))},50):(ga(c,!0),
b(document).scrollTop(L.position().top)))}}function ra(){b(document.body).data("jspHijack")||(b(document.body).data("jspHijack",!0),b(document.body).delegate("a[href*=#]","click",function(c){var e=this.href.substr(0,this.href.indexOf("#")),y=location.href,j;-1!==location.href.indexOf("#")&&(y=location.href.substr(0,location.href.indexOf("#")));if(e===y){e=escape(this.href.substr(this.href.indexOf("#")+1));j;try{j=b("#"+e+', a[name="'+e+'"]')}catch(g){return}j.length&&(e=j.closest(".jspScrollable"),
e.data("jsp").scrollToElement(j,!0),e[0].scrollIntoView&&(y=b(d).scrollTop(),j=j.offset().top,(j<y||j>y+b(d).height())&&e[0].scrollIntoView()),c.preventDefault())}}))}function za(){var b,c,d,e,y,g=!1;L.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(J){J=J.originalEvent.touches[0];b=j();c=C();d=J.pageX;e=J.pageY;y=!1;g=!0}).bind("touchmove.jsp",function(j){if(g){var j=j.originalEvent.touches[0],J=U,f=R;M.scrollTo(b+d-j.pageX,c+e-j.pageY);y=y||
5<Math.abs(d-j.pageX)||5<Math.abs(e-j.pageY);return J==U&&f==R}}).bind("touchend.jsp",function(){g=!1}).bind("click.jsp-touchclick",function(){if(y)return y=!1})}var v,M=this,K,P,G,L,F,E,wa,va,ha,Z,X,W,R,T,N,U,da,V,na,ia,ka,la,ma,sa,S,Y,ja,fa,ca,pa,ua,ba,oa,qa=!0,y=!0,J=!1,aa=!1,Ca=e.clone(!1,!1).empty(),Da=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";ua=e.css("paddingTop")+" "+e.css("paddingRight")+" "+e.css("paddingBottom")+" "+e.css("paddingLeft");ba=(parseInt(e.css("paddingLeft"),10)||
0)+(parseInt(e.css("paddingRight"),10)||0);b.extend(M,{reinitialise:function(c){c=b.extend({},v,c);k(c)},scrollToElement:function(b,c,d){ga(b,c,d)},scrollTo:function(b,c,d){A(b,d);m(c,d)},scrollToX:function(b,c){A(b,c)},scrollToY:function(b,c){m(b,c)},scrollToPercentX:function(b,c){A(b*(F-P),c)},scrollToPercentY:function(b,c){m(b*(E-G),c)},scrollBy:function(b,c,d){M.scrollByX(b,d);M.scrollByY(c,d)},scrollByX:function(b,c){var d=(j()+Math[0>b?"floor":"ceil"](b))/(F-P);D(d*N,c)},scrollByY:function(b,
c){var d=(C()+Math[0>b?"floor":"ceil"](b))/(E-G);B(d*W,c)},positionDragX:function(b,c){D(b,c)},positionDragY:function(b,c){B(b,c)},animate:function(b,c,d,e){var y={};y[c]=d;b.animate(y,{duration:v.animateDuration,easing:v.animateEase,queue:!1,step:e})},getContentPositionX:function(){return j()},getContentPositionY:function(){return C()},getContentWidth:function(){return F},getContentHeight:function(){return E},getPercentScrolledX:function(){return j()/(F-P)},getPercentScrolledY:function(){return C()/
(E-G)},getIsScrollableH:function(){return Z},getIsScrollableV:function(){return ha},getContentPane:function(){return K},scrollToBottom:function(b){B(W,b)},hijackInternalLinks:b.noop,destroy:function(){var b=C(),c=j();e.removeClass("jspScrollable").unbind(".jsp");e.replaceWith(Ca.append(K.children()));Ca.scrollTop(b);Ca.scrollLeft(c);pa&&clearInterval(pa)}});k(f)}e=b.extend({},b.fn.jScrollPane.defaults,e);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=
e[this]||e.speed});return this.each(function(){var c=b(this),d=c.data("jsp");d?d.reinitialise(e):(d=new f(c,e),c.data("jsp",d))})};b.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,
horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);(function(b){function d(c){var d=c||window.event,e=[].slice.call(arguments,1),k=0,n=0,l=0,c=b.event.fix(d);c.type="mousewheel";d.wheelDelta&&(k=d.wheelDelta/120);d.detail&&(k=-d.detail/3);l=k;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(l=0,n=-1*k);void 0!==d.wheelDeltaY&&(l=d.wheelDeltaY/120);void 0!==d.wheelDeltaX&&(n=-1*d.wheelDeltaX/120);e.unshift(c,k,n,l);return(b.event.dispatch||b.event.handle).apply(this,e)}var c=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var e=c.length;e;)b.event.fixHooks[c[--e]]=
b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var b=c.length;b;)this.removeEventListener(c[--b],d,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);(function(b){var d,c;function e(){this===d&&(c=[-260,-260],d=!1,f=3)}c=[-260,-260];d=void 0;var f=3,g=document,h=g.documentElement,k=g.body,n,l;b.event.special.mwheelIntent={setup:function(){var c=b(this).bind("mousewheel",b.event.special.mwheelIntent.handler);this!==g&&this!==h&&this!==k&&c.bind("mouseleave",e);return!0},teardown:function(){b(this).unbind("mousewheel",b.event.special.mwheelIntent.handler).unbind("mouseleave",e);return!0},handler:function(e,g){var k=[e.clientX,e.clientY];if(this===
d||Math.abs(c[0]-k[0])>f||Math.abs(c[1]-k[1])>f)return d=this,c=k,f=250,clearTimeout(l),l=setTimeout(function(){f=10},200),clearTimeout(n),n=setTimeout(function(){f=3},1500),e=b.extend({},e,{type:"mwheelIntent"}),b.event.handle.apply(this,arguments)}};b.fn.extend({mwheelIntent:function(b){return b?this.bind("mwheelIntent",b):this.trigger("mwheelIntent")},unmwheelIntent:function(b){return this.unbind("mwheelIntent",b)}});b(function(){k=g.body;b(g).bind("mwheelIntent.mwheelIntentDefault",b.noop)})})(jQuery);(function(b,d){function c(b){return"[object Arguments]"==E.call(b)}function e(b){return new f(b)}function f(b){this.o=b}function g(){for(var b,c=-1,d={},e={},j={},g=["d","j","g","a"];++c<arguments.length;)for(b in arguments[c])j[b]=arguments[c][b];for(;b=g.pop();)"object"==typeof j[b]?(d[b]=j[b].c,e[b]=j[b].k):d[b]=e[b]=j[b]||"";b=j.b;var c=/^[^,]+/.exec(b)[0],g=j.h,f=j.i,C=!("v"==b||"b"==f),f=!("b"==b||"a"==f),Q=j.n!==m;return Function("c,d,i,l,m,n,p,q,s,t,w,z,B,E,F,k,G",'"use strict";return function('+
b+"){"+(j.m||"")+";"+("var o, y"+(g?"="+g:""))+";if("+c+"==G)return "+(j.f||"y")+";"+(C?"var u="+c+".length;o=-1;"+((f?"if(u===+u){":"")+(d.d||"")+";while("+(d.j||"++o<u")+"){"+d.g+"}"+(d.a||"")+";"+(f?"}":"")):"")+(f?(C?"else{":"")+(e.d||"")+";for("+(e.j||"o in "+c)+"){"+(Q?"if(m.call("+/\S+$/.exec(e.j||c)[0]+",o)){":"")+e.g+(Q?"}":"")+"}"+(e.a||"")+";"+(C?"}":""):"")+(j.e||"")+";return "+(j.l||"y")+"}")(ea,z,P,Ba,G,I,u,Infinity,na,ia,Math,F,v,E,H,m)}function h(b){return b.replace(ya,function(b,
c){return A[c]})}function k(b,c,e,j){var g=2<arguments.length;if(b==d)return e;j&&(c=z(c,j));var f=b.length;if(f===+f){for(f&&!g&&(e=b[--f]);f--;)e=c(e,b[f],f,b);return e}var C=qa(b);for((f=C.length)&&!g&&(e=b[C[--f]]);f--;)g=C[f],e=c(e,b[g],g,b);return e}function n(b,c,d){var e=0,j=b.length;for(d||(d=I);e<j;){var g=e+j>>1;d(b[g])<d(c)?e=g+1:j=g}return e}function l(b,c,e){return c==d||e?b[0]:F.call(b,0,c)}function s(b,c){return c?P.apply([],b):ca(b,function(b,c){if(na(c))return L.apply(b,s(c)),b;
b.push(c);return b},[])}function u(b,c,e){var j;if(b==d)return-1;if(e)return e=n(b,c),b[e]===c?e:-1;e=0;for(j=b.length;e<j;e++)if(b[e]===c)return e;return-1}function o(b){var c=F.call(arguments,1);return ma(w(b),function(b){return la(c,function(c){return 0<=u(c,b)})})}function q(b,c,e){var j=b.length;return c==d||e?b[j-1]:F.call(b,-c||j)}function x(b,c,e){return F.call(b,c==d||e?1:c)}function w(b,c,d){var d=d?Y(b,d):b,e=[];3>b.length&&(c=H);ca(d,function(d,j,g){if(c?q(d)!==j||!d.length:0>u(d,j))d.push(j),
e.push(b[g]);return d},[]);return e}function z(b,c){var d=F.call(arguments,2),e=d.length;return function(){d.length=e;L.apply(d,arguments);return b.apply(c,d)}}function t(b,c,e){var j;return function(){var g=arguments,f=this;e&&!j&&b.apply(f,g);ha(j);j=Z(function(){j=d;e||b.apply(f,g)},c)}}function O(b,c,e){e||(e=[]);if(b===c)return 0!==b||1/b==1/c;if(b==d||c==d)return b===c;b.p&&(b=b.o);c.p&&(c=c.o);if(b.isEqual&&B(b.isEqual))return b.isEqual(c);if(c.isEqual&&B(c.isEqual))return c.isEqual(b);var j=
E.call(b);if(j!=E.call(c))return m;switch(j){case v:return b==""+c;case ra:return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case xa:case Aa:return+b==+c;case za:return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return m;for(var g=e.length;g--;)if(e[g]==b)return H;var g=H,f=0;e.push(b);if(j==ea){if(f=b.length,g=f==c.length)for(;f--&&(g=f in b==f in c&&O(b[f],c[f],e)););}else{if("constructor"in b!="constructor"in c||b.constructor!=
c.constructor)return m;for(var C in b)if(G.call(b,C)&&(f++,!(g=G.call(c,C)&&O(b[C],c[C],e))))break;if(g){for(C in c)if(G.call(c,C)&&!f--)break;g=!f}}e.pop();return g}function B(b){return E.call(b)==Ba}function I(b){return b}function D(b){S(oa(b),function(c){var d=e[c]=b[c];e.prototype[c]=function(){var b=F.call(arguments);wa.call(b,this.o);b=d.apply(e,b);return this.p?(new f(b)).chain():b}})}var H=!0,m=!1,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};(function(){for(var b in A)A[A[b]]=
b})();var ga="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(b=global),exports),j=0,C=b._,Q=/\\|'|\r|\n|\t|\u2028|\u2029/g,ta=/.^/,ya=/\\(\\|'|r|n|t|u2028|u2029)/g,ea="[object Array]",xa="[object Boolean]",Aa="[object Date]",Ba="[object Function]",ra="[object Number]",za="[object RegExp]",v="[object String]",M=Array.prototype,K=Object.prototype,P=M.concat,G=K.hasOwnProperty,L=M.push,F=M.slice,E=K.toString,wa=M.unshift,va=b.isFinite,K=Object.keys,ha=b.clearTimeout,
Z=b.setTimeout,X={b:"b",m:"var I=i.apply([],z.call(arguments,1))",h:"[]",g:"if(p(I,b[o])<0)y.push(b[o])"},W={h:"F",g:"if(!e(g[o],o,g))return !y"},R={b:"v",h:"v",d:"for(var A,j=1,u=arguments.length;j<u;j++){A=arguments[j]",j:"o in A",g:"v[o]=A[o]",n:m,a:"}"},T={h:"[]",g:"e(g[o],o,g)&&y.push(g[o])"},N={b:"g,e,D",m:"if(!e){e=n}else if(D){e=d(e,D)}",h:"g",g:"e(g[o],o,g)"},U={b:"v",m:"if(v!==Object(v))throw TypeError()",h:"[]",g:"y.push(o)"},da={h:"",f:"[]",d:{c:"y=Array(u)",k:"y=[]"},g:{c:"y[o]=e(g[o],o,g)",
k:"y[y.length]=e(g[o],o,g)"}},V={m:"var j,y=-q,h=y;if(!e){if(s(g)&&g[0]===+g[0])return w.max.apply(w,g);if(t(g))return y;}else if(D)e=d(e,D)",g:"j=e?e(g[o],o,g):g[o];if(j>=h)h=j,y=g[o]"},na=Array.isArray||function(b){return E.call(b)==ea},ia=g({b:"H",i:"b",m:"var f=E.call(H)",h:"F",d:"if(f==c||f==B)return !H.length",g:"return k"}),ka=g({b:"g,C",h:"k",g:"if(g[o]===C)return F"}),la=g(N,W),ma=g(N,T),sa=g(N,{g:"if(e(g[o],o,g))return g[o]"}),S=g(N),Y=g(N,da),ja=g(N,V),V=g(N,V,{m:V.m.replace("-","").replace("max",
"min"),g:V.g.replace(">=","<")}),fa=g(da,{b:"g,x",g:{c:"y[o]=g[o][x]",k:"y[y.length]=g[o][x]"}}),ca=g({b:"g,e,a,D",m:"var r=arguments.length>2;if(D)e=d(e,D)",h:"a",d:{c:"if(!r)y=g[++o]"},g:{c:"y=e(y,g[o],o,g)",k:"y=r?e(y,g[o],o,g):(r=F,g[o])"}}),T=g(N,T,{g:"!"+T.g}),W=g(N,W,{h:"k",g:W.g.replace("!","")}),pa=g(da,{b:"g",g:{c:"y[o]=g[o]",k:"y[y.length]=g[o]"}}),da=g({b:"b",h:"[]",g:"if(b[o])y.push(b[o])"}),N=g(X),X=g(X,{m:"var I=z.call(arguments,1)",h:"[]"}),ua=g(R,{g:"if(v[o]==G)"+R.g}),ba=g(R),oa=
g(U,{m:"",n:m,g:"if(E.call(v[o])==l)y.push(o)",l:"y.sort()"});c(arguments)||(c=function(b){return!(!b||!G.call(b,"callee"))});var qa=K||g(U);ba(e,{VERSION:"0.1.0",templateSettings:{escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},after:function(b,c){return 1>b?c():function(){if(1>--b)return c.apply(this,arguments)}},bind:z,bindAll:function(b){var c=arguments,d=1;1==c.length&&(d=0,c=oa(b));for(var e=c.length;d<e;d++)b[c[d]]=z(b[c[d]],b);return b},chain:function(b){return(new f(b)).chain()},
clone:function(b){return b!==Object(b)?b:na(b)?b.slice():ba({},b)},compact:da,compose:function(){var b=arguments;return function(){for(var c=arguments,d=b.length;d--;)c=[b[d].apply(this,c)];return c[0]}},contains:ka,debounce:t,defaults:ua,defer:function(b){var c=F.call(arguments,1);return Z(function(){return b.apply(d,c)},1)},delay:function(b,c){var e=F.call(arguments,2);return Z(function(){return b.apply(d,e)},c)},difference:N,escape:function(b){return(b+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},every:la,extend:ba,filter:ma,find:sa,first:l,flatten:s,forEach:S,functions:oa,groupBy:function(b,c){var d={};if(!B(c))var e=c,c=function(b){return b[e]};S(b,function(b,e,j){e=c(b,e,j);(d[e]||(d[e]=[])).push(b)});return d},has:function(b,c){return G.call(b,c)},identity:I,indexOf:u,initial:function(b,c,e){return F.call(b,0,-(c==d||e?1:c))},intersection:o,invoke:function(b,c){var d=F.call(arguments,2),e=B(c);return Y(b,function(b){return(e?
c||b:b[c]).apply(b,d)})},isArguments:c,isArray:na,isBoolean:function(b){return b===H||b===m||E.call(b)==xa},isDate:function(b){return E.call(b)==Aa},isElement:function(b){return!!(b&&1==b.nodeType)},isEmpty:ia,isEqual:O,isFinite:function(b){return va(b)&&E.call(b)==ra},isFunction:B,isNaN:function(b){return E.call(b)==ra&&b!=+b},isNull:function(b){return null===b},isNumber:function(b){return E.call(b)==ra},isObject:function(b){return b===Object(b)},isRegExp:function(b){return E.call(b)==za},isString:function(b){return E.call(b)==
v},isUndefined:function(b){return b===d},keys:qa,last:q,lastIndexOf:function(b,c){if(b==d)return-1;for(var e=b.length;e--;)if(b[e]===c)return e;return-1},map:Y,max:ja,memoize:function(b,c){var d={};return function(){var e=c?c.apply(this,arguments):arguments[0];return G.call(d,e)?d[e]:d[e]=b.apply(this,arguments)}},min:V,mixin:D,noConflict:function(){b._=C;return this},once:function(b){var c,d=m;return function(){if(d)return c;d=H;return c=b.apply(this,arguments)}},pick:function(b){for(var c,d=-1,
e=s(F.call(arguments,1)),j=e.length,g={};++d<j;)c=e[d],c in b&&(g[c]=b[c]);return g},pluck:fa,range:function(b,c,d){d||(d=1);2>arguments.length&&(c=b||0,b=0);for(var e=-1,j=Math.max(Math.ceil((c-b)/d),0),g=Array(j);++e<j;)g[e]=b,b+=d;return g},reduce:ca,reduceRight:k,reject:T,rest:x,result:function(b,c){if(b==d)return null;var e=b[c];return B(e)?b[c]():e},shuffle:function(b){var c,d=[];S(b,function(b,e){c=Math.floor(Math.random()*(e+1));d[e]=d[c];d[c]=b});return d},size:function(b){var c=E.call(b);
return c==ea||c==v?b.length:qa(b).length},some:W,sortBy:function(b,c,e){if(B(c))e&&(c=z(c,e));else var j=c,c=function(b){return b[j]};return fa(Y(b,function(d,e){return{a:c(d,e,b),b:d}}).sort(function(b,c){var e=b.a,j=c.a;return e===d?1:j===d?-1:e<j?-1:e>j?1:0}),"b")},sortedIndex:n,tap:function(b,c){c(b);return b},template:function(b,c,d){function j(b){return g.call(this,b,e)}d=ua(d||{},e.templateSettings);b="__p+='"+b.replace(Q,function(b){return"\\"+A[b]}).replace(d.escape||ta,function(b,c){return"'+((__t=("+
h(c)+"))==null?'':_['escape'](__t))+'"}).replace(d.interpolate||ta,function(b,c){return"'+((__t=("+h(c)+"))==null?'':__t)+'"}).replace(d.evaluate||ta,function(b,c){return"';"+h(c)+";__p+='"})+"';";d.variable||(b="with(object||{}){"+b+"}");var b='var __t,__j=Array.prototype.join,__p="";function print(){__p+=__j.call(arguments,"")}'+b+"return __p",g=Function(d.variable||"object","_",b);if(c)return g(c,e);j.source="function("+(d.variable||"object")+"){"+b+"}";return j},throttle:function(b,c){var e,j,
g,f,C,Q,l=t(function(){j=C=m},c);return function(){e=arguments;f=this;Q||(Q=Z(function(){Q=d;j&&b.apply(f,e);l()},c));C?j=H:g=b.apply(f,e);l();C=H;return g}},times:function(b,c,d){d&&(c=z(c,d));for(d=0;d<b;d++)c(d)},toArray:function(b){if(!b)return[];if(B(b.toArray))return b.toArray();var c=b.length;return c===+c?F.call(b):pa(b)},union:function(){return w(s(arguments,H))},uniq:w,uniqueId:function(b){var c=j++;return b?b+c:c},values:pa,without:X,wrap:function(b,c){return function(){var d=[b];L.apply(d,
arguments);return c.apply(this,d)}},zip:function(){for(var b=-1,c=ja(fa(arguments,"length")),d=Array(c);++b<c;)d[b]=fa(arguments,b);return d},all:la,any:W,collect:Y,detect:sa,each:S,foldl:ca,foldr:k,head:l,include:ka,inject:ca,intersect:o,methods:oa,select:ma,tail:x,take:l,unique:w});f.prototype=e.prototype;D(e);S("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var c=M[b];e.prototype[b]=function(){var b=this.o;c.apply(b,arguments);b.length===0&&delete b[0];return this.p?(new f(b)).chain():
b}});S(["concat","join","slice"],function(b){var c=M[b];f.prototype[b]=function(){var b=c.apply(this.o,arguments);return this.p?(new f(b)).chain():b}});ba(f.prototype,{chain:function(){this.p=H;return this},value:function(){return this.o}});ga?"object"==typeof module&&module&&module.q==ga?(module.q=e)._=e:ga._=e:(b._=e,"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define.amd.lodash&&define("lodash",function(){return e}))})(this);(function(b,d){function c(b){return"[object Arguments]"==E.call(b)}function e(b){return new f(b)}function f(b){this.o=b}function g(){for(var b,c=-1,d={},e={},j={},g=["d","j","g","a"];++c<arguments.length;)for(b in arguments[c])j[b]=arguments[c][b];for(;b=g.pop();)"object"==typeof j[b]?(d[b]=j[b].c,e[b]=j[b].k):d[b]=e[b]=j[b]||"";b=j.b;var c=/^[^,]+/.exec(b)[0],g=j.h,f=j.i,C=!("v"==b||"b"==f),f=!("b"==b||"a"==f),Q=j.n!==m;return Function("c,d,i,l,m,n,p,q,s,t,w,z,B,E,F,k,G",'"use strict";return function('+
b+"){"+(j.m||"")+";"+("var o, y"+(g?"="+g:""))+";if("+c+"==G)return "+(j.f||"y")+";"+(C?"var u="+c+".length;o=-1;"+((f?"if(u===+u){":"")+(d.d||"")+";while("+(d.j||"++o<u")+"){"+d.g+"}"+(d.a||"")+";"+(f?"}":"")):"")+(f?(C?"else{":"")+(e.d||"")+";for("+(e.j||"o in "+c)+"){"+(Q?"if(m.call("+/\S+$/.exec(e.j||c)[0]+",o)){":"")+e.g+(Q?"}":"")+"}"+(e.a||"")+";"+(C?"}":""):"")+(j.e||"")+";return "+(j.l||"y")+"}")(ea,z,P,Ba,G,I,u,Infinity,na,ia,Math,F,v,E,H,m)}function h(b){return b.replace(ya,function(b,
c){return A[c]})}function k(b,c,e,j){var g=2<arguments.length;if(b==d)return e;j&&(c=z(c,j));var f=b.length;if(f===+f){for(f&&!g&&(e=b[--f]);f--;)e=c(e,b[f],f,b);return e}var C=qa(b);for((f=C.length)&&!g&&(e=b[C[--f]]);f--;)g=C[f],e=c(e,b[g],g,b);return e}function n(b,c,d){var e=0,j=b.length;for(d||(d=I);e<j;){var g=e+j>>1;d(b[g])<d(c)?e=g+1:j=g}return e}function l(b,c,e){return c==d||e?b[0]:F.call(b,0,c)}function s(b,c){return c?P.apply([],b):ca(b,function(b,c){if(na(c))return L.apply(b,s(c)),b;
b.push(c);return b},[])}function u(b,c,e){var j;if(b==d)return-1;if(e)return e=n(b,c),b[e]===c?e:-1;e=0;for(j=b.length;e<j;e++)if(b[e]===c)return e;return-1}function o(b){var c=F.call(arguments,1);return ma(w(b),function(b){return la(c,function(c){return 0<=u(c,b)})})}function q(b,c,e){var j=b.length;return c==d||e?b[j-1]:F.call(b,-c||j)}function x(b,c,e){return F.call(b,c==d||e?1:c)}function w(b,c,d){var d=d?Y(b,d):b,e=[];3>b.length&&(c=H);ca(d,function(d,j,g){if(c?q(d)!==j||!d.length:0>u(d,j))d.push(j),
e.push(b[g]);return d},[]);return e}function z(b,c){var d=F.call(arguments,2),e=d.length;return function(){d.length=e;L.apply(d,arguments);return b.apply(c,d)}}function t(b,c,e){var j;return function(){var g=arguments,f=this;e&&!j&&b.apply(f,g);ha(j);j=Z(function(){j=d;e||b.apply(f,g)},c)}}function O(b,c,e){e||(e=[]);if(b===c)return 0!==b||1/b==1/c;if(b==d||c==d)return b===c;b.p&&(b=b.o);c.p&&(c=c.o);if(b.isEqual&&B(b.isEqual))return b.isEqual(c);if(c.isEqual&&B(c.isEqual))return c.isEqual(b);var j=
E.call(b);if(j!=E.call(c))return m;switch(j){case v:return b==""+c;case ra:return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case xa:case Aa:return+b==+c;case za:return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return m;for(var g=e.length;g--;)if(e[g]==b)return H;var g=H,f=0;e.push(b);if(j==ea){if(f=b.length,g=f==c.length)for(;f--&&(g=f in b==f in c&&O(b[f],c[f],e)););}else{if("constructor"in b!="constructor"in c||b.constructor!=
c.constructor)return m;for(var C in b)if(G.call(b,C)&&(f++,!(g=G.call(c,C)&&O(b[C],c[C],e))))break;if(g){for(C in c)if(G.call(c,C)&&!f--)break;g=!f}}e.pop();return g}function B(b){return E.call(b)==Ba}function I(b){return b}function D(b){S(oa(b),function(c){var d=e[c]=b[c];e.prototype[c]=function(){var b=F.call(arguments);wa.call(b,this.o);b=d.apply(e,b);return this.p?(new f(b)).chain():b}})}var H=!0,m=!1,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};(function(){for(var b in A)A[A[b]]=
b})();var ga="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(b=global),exports),j=0,C=b._,Q=/\\|'|\r|\n|\t|\u2028|\u2029/g,ta=/.^/,ya=/\\(\\|'|r|n|t|u2028|u2029)/g,ea="[object Array]",xa="[object Boolean]",Aa="[object Date]",Ba="[object Function]",ra="[object Number]",za="[object RegExp]",v="[object String]",M=Array.prototype,K=Object.prototype,P=M.concat,G=K.hasOwnProperty,L=M.push,F=M.slice,E=K.toString,wa=M.unshift,va=b.isFinite,K=Object.keys,ha=b.clearTimeout,
Z=b.setTimeout,X={b:"b",m:"var I=i.apply([],z.call(arguments,1))",h:"[]",g:"if(p(I,b[o])<0)y.push(b[o])"},W={h:"F",g:"if(!e(g[o],o,g))return !y"},R={b:"v",h:"v",d:"for(var A,j=1,u=arguments.length;j<u;j++){A=arguments[j]",j:"o in A",g:"v[o]=A[o]",n:m,a:"}"},T={h:"[]",g:"e(g[o],o,g)&&y.push(g[o])"},N={b:"g,e,D",m:"if(!e){e=n}else if(D){e=d(e,D)}",h:"g",g:"e(g[o],o,g)"},U={b:"v",m:"if(v!==Object(v))throw TypeError()",h:"[]",g:"y.push(o)"},da={h:"",f:"[]",d:{c:"y=Array(u)",k:"y=[]"},g:{c:"y[o]=e(g[o],o,g)",
k:"y[y.length]=e(g[o],o,g)"}},V={m:"var j,y=-q,h=y;if(!e){if(s(g)&&g[0]===+g[0])return w.max.apply(w,g);if(t(g))return y;}else if(D)e=d(e,D)",g:"j=e?e(g[o],o,g):g[o];if(j>=h)h=j,y=g[o]"},na=Array.isArray||function(b){return E.call(b)==ea},ia=g({b:"H",i:"b",m:"var f=E.call(H)",h:"F",d:"if(f==c||f==B)return !H.length",g:"return k"}),ka=g({b:"g,C",h:"k",g:"if(g[o]===C)return F"}),la=g(N,W),ma=g(N,T),sa=g(N,{g:"if(e(g[o],o,g))return g[o]"}),S=g(N),Y=g(N,da),ja=g(N,V),V=g(N,V,{m:V.m.replace("-","").replace("max",
"min"),g:V.g.replace(">=","<")}),fa=g(da,{b:"g,x",g:{c:"y[o]=g[o][x]",k:"y[y.length]=g[o][x]"}}),ca=g({b:"g,e,a,D",m:"var r=arguments.length>2;if(D)e=d(e,D)",h:"a",d:{c:"if(!r)y=g[++o]"},g:{c:"y=e(y,g[o],o,g)",k:"y=r?e(y,g[o],o,g):(r=F,g[o])"}}),T=g(N,T,{g:"!"+T.g}),W=g(N,W,{h:"k",g:W.g.replace("!","")}),pa=g(da,{b:"g",g:{c:"y[o]=g[o]",k:"y[y.length]=g[o]"}}),da=g({b:"b",h:"[]",g:"if(b[o])y.push(b[o])"}),N=g(X),X=g(X,{m:"var I=z.call(arguments,1)",h:"[]"}),ua=g(R,{g:"if(v[o]==G)"+R.g}),ba=g(R),oa=
g(U,{m:"",n:m,g:"if(E.call(v[o])==l)y.push(o)",l:"y.sort()"});c(arguments)||(c=function(b){return!(!b||!G.call(b,"callee"))});var qa=K||g(U);ba(e,{VERSION:"0.1.0",templateSettings:{escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},after:function(b,c){return 1>b?c():function(){if(1>--b)return c.apply(this,arguments)}},bind:z,bindAll:function(b){var c=arguments,d=1;1==c.length&&(d=0,c=oa(b));for(var e=c.length;d<e;d++)b[c[d]]=z(b[c[d]],b);return b},chain:function(b){return(new f(b)).chain()},
clone:function(b){return b!==Object(b)?b:na(b)?b.slice():ba({},b)},compact:da,compose:function(){var b=arguments;return function(){for(var c=arguments,d=b.length;d--;)c=[b[d].apply(this,c)];return c[0]}},contains:ka,debounce:t,defaults:ua,defer:function(b){var c=F.call(arguments,1);return Z(function(){return b.apply(d,c)},1)},delay:function(b,c){var e=F.call(arguments,2);return Z(function(){return b.apply(d,e)},c)},difference:N,escape:function(b){return(b+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},every:la,extend:ba,filter:ma,find:sa,first:l,flatten:s,forEach:S,functions:oa,groupBy:function(b,c){var d={};if(!B(c))var e=c,c=function(b){return b[e]};S(b,function(b,e,j){e=c(b,e,j);(d[e]||(d[e]=[])).push(b)});return d},has:function(b,c){return G.call(b,c)},identity:I,indexOf:u,initial:function(b,c,e){return F.call(b,0,-(c==d||e?1:c))},intersection:o,invoke:function(b,c){var d=F.call(arguments,2),e=B(c);return Y(b,function(b){return(e?
c||b:b[c]).apply(b,d)})},isArguments:c,isArray:na,isBoolean:function(b){return b===H||b===m||E.call(b)==xa},isDate:function(b){return E.call(b)==Aa},isElement:function(b){return!!(b&&1==b.nodeType)},isEmpty:ia,isEqual:O,isFinite:function(b){return va(b)&&E.call(b)==ra},isFunction:B,isNaN:function(b){return E.call(b)==ra&&b!=+b},isNull:function(b){return null===b},isNumber:function(b){return E.call(b)==ra},isObject:function(b){return b===Object(b)},isRegExp:function(b){return E.call(b)==za},isString:function(b){return E.call(b)==
v},isUndefined:function(b){return b===d},keys:qa,last:q,lastIndexOf:function(b,c){if(b==d)return-1;for(var e=b.length;e--;)if(b[e]===c)return e;return-1},map:Y,max:ja,memoize:function(b,c){var d={};return function(){var e=c?c.apply(this,arguments):arguments[0];return G.call(d,e)?d[e]:d[e]=b.apply(this,arguments)}},min:V,mixin:D,noConflict:function(){b._=C;return this},once:function(b){var c,d=m;return function(){if(d)return c;d=H;return c=b.apply(this,arguments)}},pick:function(b){for(var c,d=-1,
e=s(F.call(arguments,1)),j=e.length,g={};++d<j;)c=e[d],c in b&&(g[c]=b[c]);return g},pluck:fa,range:function(b,c,d){d||(d=1);2>arguments.length&&(c=b||0,b=0);for(var e=-1,j=Math.max(Math.ceil((c-b)/d),0),g=Array(j);++e<j;)g[e]=b,b+=d;return g},reduce:ca,reduceRight:k,reject:T,rest:x,result:function(b,c){if(b==d)return null;var e=b[c];return B(e)?b[c]():e},shuffle:function(b){var c,d=[];S(b,function(b,e){c=Math.floor(Math.random()*(e+1));d[e]=d[c];d[c]=b});return d},size:function(b){var c=E.call(b);
return c==ea||c==v?b.length:qa(b).length},some:W,sortBy:function(b,c,e){if(B(c))e&&(c=z(c,e));else var j=c,c=function(b){return b[j]};return fa(Y(b,function(d,e){return{a:c(d,e,b),b:d}}).sort(function(b,c){var e=b.a,j=c.a;return e===d?1:j===d?-1:e<j?-1:e>j?1:0}),"b")},sortedIndex:n,tap:function(b,c){c(b);return b},template:function(b,c,d){function j(b){return g.call(this,b,e)}d=ua(d||{},e.templateSettings);b="__p+='"+b.replace(Q,function(b){return"\\"+A[b]}).replace(d.escape||ta,function(b,c){return"'+((__t=("+
h(c)+"))==null?'':_['escape'](__t))+'"}).replace(d.interpolate||ta,function(b,c){return"'+((__t=("+h(c)+"))==null?'':__t)+'"}).replace(d.evaluate||ta,function(b,c){return"';"+h(c)+";__p+='"})+"';";d.variable||(b="with(object||{}){"+b+"}");var b='var __t,__j=Array.prototype.join,__p="";function print(){__p+=__j.call(arguments,"")}'+b+"return __p",g=Function(d.variable||"object","_",b);if(c)return g(c,e);j.source="function("+(d.variable||"object")+"){"+b+"}";return j},throttle:function(b,c){var e,j,
g,f,C,Q,l=t(function(){j=C=m},c);return function(){e=arguments;f=this;Q||(Q=Z(function(){Q=d;j&&b.apply(f,e);l()},c));C?j=H:g=b.apply(f,e);l();C=H;return g}},times:function(b,c,d){d&&(c=z(c,d));for(d=0;d<b;d++)c(d)},toArray:function(b){if(!b)return[];if(B(b.toArray))return b.toArray();var c=b.length;return c===+c?F.call(b):pa(b)},union:function(){return w(s(arguments,H))},uniq:w,uniqueId:function(b){var c=j++;return b?b+c:c},values:pa,without:X,wrap:function(b,c){return function(){var d=[b];L.apply(d,
arguments);return c.apply(this,d)}},zip:function(){for(var b=-1,c=ja(fa(arguments,"length")),d=Array(c);++b<c;)d[b]=fa(arguments,b);return d},all:la,any:W,collect:Y,detect:sa,each:S,foldl:ca,foldr:k,head:l,include:ka,inject:ca,intersect:o,methods:oa,select:ma,tail:x,take:l,unique:w});f.prototype=e.prototype;D(e);S("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var c=M[b];e.prototype[b]=function(){var b=this.o;c.apply(b,arguments);b.length===0&&delete b[0];return this.p?(new f(b)).chain():
b}});S(["concat","join","slice"],function(b){var c=M[b];f.prototype[b]=function(){var b=c.apply(this.o,arguments);return this.p?(new f(b)).chain():b}});ba(f.prototype,{chain:function(){this.p=H;return this},value:function(){return this.o}});ga?"object"==typeof module&&module&&module.q==ga?(module.q=e)._=e:ga._=e:(b._=e,"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define.amd.lodash&&define("lodash",function(){return e}))})(this);(function(){var b=this,d=b.Backbone,c=Array.prototype.slice,e=Array.prototype.splice,f;f="undefined"!==typeof exports?exports:b.Backbone={};f.VERSION="0.9.2";var g=b._;!g&&"undefined"!==typeof require&&(g=require("underscore"));var h=b.jQuery||b.Zepto||b.ender;f.setDomLibrary=function(b){h=b};f.noConflict=function(){b.Backbone=d;return this};f.emulateHTTP=!1;f.emulateJSON=!1;var k=/\s+/,n=f.Events={on:function(b,c,d){var e,g,f,m,t;if(!c)return this;b=b.split(k);for(e=this._callbacks||(this._callbacks=
{});g=b.shift();)f=(t=e[g])?t.tail:{},f.next=m={},f.context=d,f.callback=c,e[g]={tail:m,next:t?t.next:f};return this},off:function(b,c,d){var e,f,m,t,l,n;if(f=this._callbacks){if(!b&&!c&&!d)return delete this._callbacks,this;for(b=b?b.split(k):g.keys(f);e=b.shift();)if(m=f[e],delete f[e],m&&(c||d))for(t=m.tail;(m=m.next)!==t;)if(l=m.callback,n=m.context,c&&l!==c||d&&n!==d)this.on(e,l,n);return this}},trigger:function(b){var d,e,g,f,m,t;if(!(g=this._callbacks))return this;m=g.all;b=b.split(k);for(t=
c.call(arguments,1);d=b.shift();){if(e=g[d])for(f=e.tail;(e=e.next)!==f;)e.callback.apply(e.context||this,t);if(e=m){f=e.tail;for(d=[d].concat(t);(e=e.next)!==f;)e.callback.apply(e.context||this,d)}}return this}};n.bind=n.on;n.unbind=n.off;var l=f.Model=function(b,c){var d;b||(b={});c&&c.parse&&(b=this.parse(b));if(d=A(this,"defaults"))b=g.extend({},d,b);c&&c.collection&&(this.collection=c.collection);this.attributes={};this._escapedAttributes={};this.cid=g.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(b,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=g.clone(this.attributes);this.initialize.apply(this,arguments)};g.extend(l.prototype,n,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return g.clone(this.attributes)},get:function(b){return this.attributes[b]},escape:function(b){var c;if(c=this._escapedAttributes[b])return c;c=this.get(b);return this._escapedAttributes[b]=g.escape(null==
c?"":""+c)},has:function(b){return null!=this.get(b)},set:function(b,c,d){var e,f;g.isObject(b)||null==b?(e=b,d=c):(e={},e[b]=c);d||(d={});if(!e)return this;e instanceof l&&(e=e.attributes);if(d.unset)for(f in e)e[f]=void 0;if(!this._validate(e,d))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var c=d.changes={},m=this.attributes,t=this._escapedAttributes,n=this._previousAttributes||{};for(f in e){b=e[f];if(!g.isEqual(m[f],b)||d.unset&&g.has(m,f))delete t[f],(d.silent?this._silent:
c)[f]=!0;d.unset?delete m[f]:m[f]=b;!g.isEqual(n[f],b)||g.has(m,f)!=g.has(n,f)?(this.changed[f]=b,d.silent||(this._pending[f]=!0)):(delete this.changed[f],delete this._pending[f])}d.silent||this.change(d);return this},unset:function(b,c){(c||(c={})).unset=!0;return this.set(b,null,c)},clear:function(b){(b||(b={})).unset=!0;return this.set(g.clone(this.attributes),b)},fetch:function(b){var b=b?g.clone(b):{},c=this,d=b.success;b.success=function(e,g,f){if(!c.set(c.parse(e,f),b))return!1;d&&d(c,e)};
b.error=f.wrapError(b.error,c,b);return(this.sync||f.sync).call(this,"read",this,b)},save:function(b,c,d){var e,m;g.isObject(b)||null==b?(e=b,d=c):(e={},e[b]=c);d=d?g.clone(d):{};if(d.wait){if(!this._validate(e,d))return!1;m=g.clone(this.attributes)}b=g.extend({},d,{silent:!0});if(e&&!this.set(e,d.wait?b:d))return!1;var t=this,l=d.success;d.success=function(b,c,j){c=t.parse(b,j);if(d.wait){delete d.wait;c=g.extend(e||{},c)}if(!t.set(c,d))return false;l?l(t,b):t.trigger("sync",t,b,d)};d.error=f.wrapError(d.error,
t,d);c=this.isNew()?"create":"update";c=(this.sync||f.sync).call(this,c,this,d);d.wait&&this.set(m,b);return c},destroy:function(b){var b=b?g.clone(b):{},c=this,d=b.success,e=function(){c.trigger("destroy",c,c.collection,b)};if(this.isNew())return e(),!1;b.success=function(g){b.wait&&e();d?d(c,g):c.trigger("sync",c,g,b)};b.error=f.wrapError(b.error,c,b);var m=(this.sync||f.sync).call(this,"delete",this,b);b.wait||e();return m},url:function(){var b=A(this,"urlRoot")||A(this.collection,"url")||ga();
return this.isNew()?b:b+("/"==b.charAt(b.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(b){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(b){b||(b={});var c=this._changing;this._changing=!0;for(var d in this._silent)this._pending[d]=!0;var e=g.extend({},b.changes,this._silent);this._silent={};for(d in e)this.trigger("change:"+d,this,this.get(d),b);if(c)return this;for(;!g.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,b);for(d in this.changed)!this._pending[d]&&!this._silent[d]&&delete this.changed[d];this._previousAttributes=g.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(b){return!arguments.length?!g.isEmpty(this.changed):g.has(this.changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?g.clone(this.changed):!1;var c,d=!1,e=this._previousAttributes,f;for(f in b)if(!g.isEqual(e[f],c=b[f]))(d||(d={}))[f]=c;return d},previous:function(b){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[b]},previousAttributes:function(){return g.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(b,c){if(c.silent||!this.validate)return!0;var b=g.extend({},this.attributes,b),d=this.validate(b,c);if(!d)return!0;c&&c.error?c.error(this,d,c):this.trigger("error",this,d,c);return!1}});var s=f.Collection=function(b,c){c||(c={});c.model&&(this.model=c.model);c.comparator&&(this.comparator=c.comparator);
this._reset();this.initialize.apply(this,arguments);b&&this.reset(b,{silent:!0,parse:c.parse})};g.extend(s.prototype,n,{model:l,initialize:function(){},toJSON:function(b){return this.map(function(c){return c.toJSON(b)})},add:function(b,c){var d,f,m,t,l,n={},k={},A=[];c||(c={});b=g.isArray(b)?b.slice():[b];d=0;for(f=b.length;d<f;d++){if(!(m=b[d]=this._prepareModel(b[d],c)))throw Error("Can't add an invalid model to a collection");t=m.cid;l=m.id;n[t]||this._byCid[t]||null!=l&&(k[l]||this._byId[l])?
A.push(d):n[t]=k[l]=m}for(d=A.length;d--;)b.splice(A[d],1);d=0;for(f=b.length;d<f;d++)(m=b[d]).on("all",this._onModelEvent,this),this._byCid[m.cid]=m,null!=m.id&&(this._byId[m.id]=m);this.length+=f;e.apply(this.models,[null!=c.at?c.at:this.models.length,0].concat(b));this.comparator&&this.sort({silent:!0});if(c.silent)return this;d=0;for(f=this.models.length;d<f;d++)if(n[(m=this.models[d]).cid])c.index=d,m.trigger("add",m,this,c);return this},remove:function(b,c){var d,e,f,m;c||(c={});b=g.isArray(b)?
b.slice():[b];d=0;for(e=b.length;d<e;d++)if(m=this.getByCid(b[d])||this.get(b[d]))delete this._byId[m.id],delete this._byCid[m.cid],f=this.indexOf(m),this.models.splice(f,1),this.length--,c.silent||(c.index=f,m.trigger("remove",m,this,c)),this._removeReference(m);return this},push:function(b,c){b=this._prepareModel(b,c);this.add(b,c);return b},pop:function(b){var c=this.at(this.length-1);this.remove(c,b);return c},unshift:function(b,c){b=this._prepareModel(b,c);this.add(b,g.extend({at:0},c));return b},
shift:function(b){var c=this.at(0);this.remove(c,b);return c},get:function(b){return null==b?void 0:this._byId[null!=b.id?b.id:b]},getByCid:function(b){return b&&this._byCid[b.cid||b]},at:function(b){return this.models[b]},where:function(b){return g.isEmpty(b)?[]:this.filter(function(c){for(var d in b)if(b[d]!==c.get(d))return!1;return!0})},sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var c=g.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(c):this.models.sort(c);b.silent||this.trigger("reset",this,b);return this},pluck:function(b){return g.map(this.models,function(c){return c.get(b)})},reset:function(b,c){b||(b=[]);c||(c={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d]);this._reset();this.add(b,g.extend({silent:!0},c));c.silent||this.trigger("reset",this,c);return this},fetch:function(b){b=b?g.clone(b):{};void 0===b.parse&&(b.parse=!0);var c=this,d=b.success;b.success=function(e,
g,f){c[b.add?"add":"reset"](c.parse(e,f),b);d&&d(c,e)};b.error=f.wrapError(b.error,c,b);return(this.sync||f.sync).call(this,"read",this,b)},create:function(b,c){var d=this,c=c?g.clone(c):{},b=this._prepareModel(b,c);if(!b)return!1;c.wait||d.add(b,c);var e=c.success;c.success=function(g,f){c.wait&&d.add(g,c);e?e(g,f):g.trigger("sync",b,f,c)};b.save(null,c);return b},parse:function(b){return b},chain:function(){return g(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(b,c){c||(c={});b instanceof l?b.collection||(b.collection=this):(c.collection=this,b=new this.model(b,c),b._validate(b.attributes,c)||(b=!1));return b},_removeReference:function(b){this==b.collection&&delete b.collection;b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,c,d,e){("add"==b||"remove"==b)&&d!=this||("destroy"==b&&this.remove(c,e),c&&b==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],this._byId[c.id]=c),this.trigger.apply(this,
arguments))}});g.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(b){s.prototype[b]=function(){return g[b].apply(g,[this.models].concat(g.toArray(arguments)))}});var u=f.Router=function(b){b||(b={});b.routes&&(this.routes=b.routes);this._bindRoutes();this.initialize.apply(this,arguments)},o=/:\w+/g,
q=/\*\w+/g,x=/[-[\]{}()+?.,\\^$|#\s]/g;g.extend(u.prototype,n,{initialize:function(){},route:function(b,c,d){f.history||(f.history=new w);g.isRegExp(b)||(b=this._routeToRegExp(b));d||(d=this[c]);f.history.route(b,g.bind(function(e){e=this._extractParameters(b,e);d&&d.apply(this,e);this.trigger.apply(this,["route:"+c].concat(e));f.history.trigger("route",this,c,e)},this));return this},navigate:function(b,c){f.history.navigate(b,c)},_bindRoutes:function(){if(this.routes){var b=[],c;for(c in this.routes)b.unshift([c,
this.routes[c]]);c=0;for(var d=b.length;c<d;c++)this.route(b[c][0],b[c][1],this[b[c][1]])}},_routeToRegExp:function(b){b=b.replace(x,"\\$&").replace(o,"([^/]+)").replace(q,"(.*?)");return RegExp("^"+b+"$")},_extractParameters:function(b,c){return b.exec(c).slice(1)}});var w=f.History=function(){this.handlers=[];g.bindAll(this,"checkUrl")},z=/^[#\/]/,t=/msie [\w.]+/;w.started=!1;g.extend(w.prototype,n,{interval:50,getHash:function(b){return(b=(b?b.location:window.location).href.match(/#(.*)$/))?b[1]:
""},getFragment:function(b,c){if(null==b)if(this._hasPushState||c){var b=window.location.pathname,d=window.location.search;d&&(b+=d)}else b=this.getHash();b.indexOf(this.options.root)||(b=b.substr(this.options.root.length));return b.replace(z,"")},start:function(b){if(w.started)throw Error("Backbone.history has already been started");w.started=!0;this.options=g.extend({},{root:"/"},this.options,b);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var b=this.getFragment(),c=document.documentMode;if(c=t.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!c?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=b;b=window.location;c=b.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!c)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&c&&b.hash&&(this.fragment=this.getHash().replace(z,""),window.history.replaceState({},document.title,b.protocol+"//"+b.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);w.started=!1},route:function(b,c){this.handlers.unshift({route:b,callback:c})},checkUrl:function(){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b==this.fragment)return!1;this.iframe&&this.navigate(b);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(b){var c=this.fragment=this.getFragment(b);return g.any(this.handlers,
function(b){if(b.route.test(c))return b.callback(c),!0})},navigate:function(b,c){if(!w.started)return!1;if(!c||!0===c)c={trigger:c};var d=(b||"").replace(z,"");this.fragment!=d&&(this._hasPushState?(0!=d.indexOf(this.options.root)&&(d=this.options.root+d),this.fragment=d,window.history[c.replace?"replaceState":"pushState"]({},document.title,d)):this._wantsHashChange?(this.fragment=d,this._updateHash(window.location,d,c.replace),this.iframe&&d!=this.getFragment(this.getHash(this.iframe))&&(c.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,d,c.replace))):window.location.assign(this.options.root+b),c.trigger&&this.loadUrl(b))},_updateHash:function(b,c,d){d?b.replace(b.toString().replace(/(javascript:|#).*$/,"")+"#"+c):b.hash=c}});var O=f.View=function(b){this.cid=g.uniqueId("view");this._configure(b||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},B=/^(\S+)\s*(.*)$/,I="model,collection,el,id,attributes,className,tagName".split(",");
g.extend(O.prototype,n,{tagName:"div",$:function(b){return this.$el.find(b)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(b,c,d){b=document.createElement(b);c&&h(b).attr(c);d&&h(b).html(d);return b},setElement:function(b,c){this.$el&&this.undelegateEvents();this.$el=b instanceof h?b:h(b);this.el=this.$el[0];!1!==c&&this.delegateEvents();return this},delegateEvents:function(b){if(b||(b=A(this,"events"))){this.undelegateEvents();
for(var c in b){var d=b[c];g.isFunction(d)||(d=this[b[c]]);if(!d)throw Error('Method "'+b[c]+'" does not exist');var e=c.match(B),f=e[1],e=e[2],d=g.bind(d,this),f=f+(".delegateEvents"+this.cid);""===e?this.$el.bind(f,d):this.$el.delegate(e,f,d)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(b){this.options&&(b=g.extend({},this.options,b));for(var c=0,d=I.length;c<d;c++){var e=I[c];b[e]&&(this[e]=b[e])}this.options=b},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var b=A(this,"attributes")||{};this.id&&(b.id=this.id);this.className&&(b["class"]=this.className);this.setElement(this.make(this.tagName,b),!1)}}});l.extend=s.extend=u.extend=O.extend=function(b,c){var d=m(this,b,c);d.extend=this.extend;return d};var D={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};f.sync=function(b,c,d){var e=D[b];d||(d={});var m={type:e,dataType:"json"};d.url||(m.url=A(c,"url")||ga());if(!d.data&&c&&("create"==b||"update"==b))m.contentType="application/json",
m.data=JSON.stringify(c.toJSON());f.emulateJSON&&(m.contentType="application/x-www-form-urlencoded",m.data=m.data?{model:m.data}:{});if(f.emulateHTTP&&("PUT"===e||"DELETE"===e))f.emulateJSON&&(m.data._method=e),m.type="POST",m.beforeSend=function(b){b.setRequestHeader("X-HTTP-Method-Override",e)};"GET"!==m.type&&!f.emulateJSON&&(m.processData=!1);return h.ajax(g.extend(m,d))};f.wrapError=function(b,c,d){return function(e,f){f=e===c?f:e;b?b(c,f,d):c.trigger("error",c,f,d)}};var H=function(){},m=function(b,
c,d){var e;e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){b.apply(this,arguments)};g.extend(e,b);H.prototype=b.prototype;e.prototype=new H;c&&g.extend(e.prototype,c);d&&g.extend(e,d);e.prototype.constructor=e;e.__super__=b.prototype;return e},A=function(b,c){return!b||!b[c]?null:g.isFunction(b[c])?b[c]():b[c]},ga=function(){throw Error('A "url" property or function must be specified');}}).call(this);var GeoJSON=function(b,d,c){var e=function(b,c,k){var h;switch(b.type){case "Point":c.position=new google.maps.LatLng(b.coordinates[1],b.coordinates[0]);"agencies"==d?c.icon="img/icons/agency.png":"ashokas"==d&&(c.icon="img/icons/ashoka.png");"agencies"==d&&(c.topic_id=k.topic_id);h=new NexsoMarker(d,c,k);break;case "MultiPoint":h=[];for(var o=0;o<b.coordinates.length;o++)c.position=new google.maps.LatLng(b.coordinates[o][1],b.coordinates[o][0]),k&&(h[z].opts.geojsonProperties=k),h.push(new NexsoMarker(d,
c));break;case "LineString":for(var q=[],o=0;o<b.coordinates.length;o++){var x=b.coordinates[o],x=new google.maps.LatLng(x[1],x[0]);q.push(x)}c.path=q;h=new google.maps.Polyline(c);k&&h.set("geojsonProperties",k);break;case "MultiLineString":h=[];for(o=0;o<b.coordinates.length;o++){for(var q=[],w=0;w<b.coordinates[o].length;w++)x=b.coordinates[o][w],x=new google.maps.LatLng(x[1],x[0]),q.push(x);c.path=q;h.push(new google.maps.Polyline(c))}if(k)for(var z=0;z<h.length;z++)h[z].set("geojsonProperties",
k);break;case "Polygon":for(var t=[],O,B,o=0;o<b.coordinates.length;o++){q=[];for(w=0;w<b.coordinates[o].length;w++)x=new google.maps.LatLng(b.coordinates[o][w][1],b.coordinates[o][w][0]),q.push(x);o?(1==o&&(B=g(q)),O==B?t.push(q.reverse()):t.push(q)):(O=g(q),t.push(q))}c.paths=t;c.zindex=3E4;h=new google.maps.Polygon(c);k&&h.set("geojsonProperties",k);break;case "MultiPolygon":h=[];for(o=0;o<b.coordinates.length;o++){t=[];for(w=0;w<b.coordinates[o].length;w++){q=[];for(z=0;z<b.coordinates[o][w].length;z++)x=
new google.maps.LatLng(b.coordinates[o][w][z][1],b.coordinates[o][w][z][0]),q.push(x);w?(1==w&&(B=g(q)),O==B?t.push(q.reverse()):t.push(q)):(O=g(q),t.push(q))}c.paths=t;h.push(new google.maps.Polygon(c))}if(k)for(z=0;z<h.length;z++)h[z].set("geojsonProperties",k);break;case "GeometryCollection":h=[];if(b.geometries)for(o=0;o<b.geometries.length;o++)h.push(e(b.geometries[o],c,k||null));else h=f('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;default:h=f('Invalid GeoJSON object: Geometry object must be one of "Point", "LineString", "Polygon" or "MultiPolygon".')}return h},
f=function(b){return{type:"Error",message:b}},g=function(b){for(var c,d=0;d<b.length-2;d++)if(a=(b[d+1].lat()-b[d].lat())*(b[d+2].lng()-b[d].lng())-(b[d+2].lat()-b[d].lat())*(b[d+1].lng()-b[d].lng()),0<a){c=!0;break}else if(0>a){c=!1;break}return c},h=c||{};switch(b.type){case "FeatureCollection":if(b.features)for(var c=[],k=0;k<b.features.length;k++)c.push(e(b.features[k].geometry,h,b.features[k].properties));else c=f('Invalid GeoJSON object: FeatureCollection object missing "features" member.');
break;case "GeometryCollection":if(b.geometries){c=[];for(k=0;k<b.geometries.length;k++)c.push(e(b.geometries[k],h))}else c=f('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;case "Feature":c=!b.properties||!b.geometry?f('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.'):e(b.geometry,h,b.properties);break;case "Point":case "MultiPoint":case "LineString":case "MultiLineString":case "Polygon":case "MultiPolygon":c=b.coordinates?
c=e(b,h):f('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:c=f('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString", "Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return c};(function(b,d){function c(b){return!!(""===b||b&&b.charCodeAt&&b.substr)}function e(b){return u?u(b):"[object Array]"===o.call(b)}function f(b){return"[object Object]"===o.call(b)}function g(b,c){var d,b=b||{},c=c||{};for(d in c)c.hasOwnProperty(d)&&null==b[d]&&(b[d]=c[d]);return b}function h(b,c,d){var e=[],f,g;if(!b)return e;if(s&&b.map===s)return b.map(c,d);f=0;for(g=b.length;f<g;f++)e[f]=c.call(d,b[f],f,b);return e}function k(b,c){b=Math.round(Math.abs(b));return isNaN(b)?c:b}function n(b){var d=
l.settings.currency.format;"function"===typeof b&&(b=b());return c(b)&&b.match("%v")?{pos:b,neg:b.replace("-","").replace("%v","-%v"),zero:b}:!b||!b.pos||!b.pos.match("%v")?!c(d)?d:l.settings.currency.format={pos:d,neg:d.replace("%v","-%v"),zero:d}:b}var l={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},s=Array.prototype.map,u=Array.isArray,o=Object.prototype.toString,q=l.unformat=
l.parse=function(b,c){if(e(b))return h(b,function(b){return q(b,c)});b=b||0;if("number"===typeof b)return b;var c=c||".",d=RegExp("[^0-9-"+c+"]",["g"]),d=parseFloat((""+b).replace(/\((.*)\)/,"-$1").replace(d,"").replace(c,"."));return!isNaN(d)?d:0},x=l.toFixed=function(b,c){var c=k(c,l.settings.number.precision),d=Math.pow(10,c);return(Math.round(l.unformat(b)*d)/d).toFixed(c)},w=l.formatNumber=function(b,c,d,n){if(e(b))return h(b,function(b){return w(b,c,d,n)});var b=q(b),s=g(f(c)?c:{precision:c,
thousand:d,decimal:n},l.settings.number),o=k(s.precision),m=0>b?"-":"",A=parseInt(x(Math.abs(b||0),o),10)+"",z=3<A.length?A.length%3:0;return m+(z?A.substr(0,z)+s.thousand:"")+A.substr(z).replace(/(\d{3})(?=\d)/g,"$1"+s.thousand)+(o?s.decimal+x(Math.abs(b),o).split(".")[1]:"")},z=l.formatMoney=function(b,c,d,s,o,u){if(e(b))return h(b,function(b){return z(b,c,d,s,o,u)});var b=q(b),m=g(f(c)?c:{symbol:c,precision:d,thousand:s,decimal:o,format:u},l.settings.currency),A=n(m.format);return(0<b?A.pos:0>
b?A.neg:A.zero).replace("%s",m.symbol).replace("%v",w(Math.abs(b),k(m.precision),m.thousand,m.decimal))};l.formatColumn=function(b,d,B,s,o,z){if(!b)return[];var m=g(f(d)?d:{symbol:d,precision:B,thousand:s,decimal:o,format:z},l.settings.currency),A=n(m.format),u=A.pos.indexOf("%s")<A.pos.indexOf("%v")?!0:!1,j=0,b=h(b,function(b){if(e(b))return l.formatColumn(b,m);b=q(b);b=(0<b?A.pos:0>b?A.neg:A.zero).replace("%s",m.symbol).replace("%v",w(Math.abs(b),k(m.precision),m.thousand,m.decimal));b.length>j&&
(j=b.length);return b});return h(b,function(b){return c(b)&&b.length<j?u?b.replace(m.symbol,m.symbol+Array(j-b.length+1).join(" ")):Array(j-b.length+1).join(" ")+b:b})};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=l),exports.accounting=l):"function"===typeof define&&define.amd?define([],function(){return l}):(l.noConflict=function(c){return function(){b.accounting=c;l.noConflict=d;return l}}(b.accounting),b.accounting=l)})(this);(function(b,d,c){function e(b,c){var e=d.createElement(b||"div"),f;for(f in c)e[f]=c[f];return e}function f(b){for(var c=1,d=arguments.length;c<d;c++)b.appendChild(arguments[c]);return b}function g(b,c,d,e){var f=["opacity",c,~~(100*b),d,e].join("-"),d=0.01+100*(d/e),e=Math.max(1-(1-b)/c*(100-d),b),g=o.substring(0,o.indexOf("Animation")).toLowerCase();return u[f]||(q.insertRule("@"+(g&&"-"+g+"-"||"")+"keyframes "+f+"{0%{opacity:"+e+"}"+d+"%{opacity:"+b+"}"+(d+0.01)+"%{opacity:1}"+(d+c)%100+"%{opacity:"+
b+"}100%{opacity:"+e+"}}",0),u[f]=1),f}function h(b,d){var e=b.style,f,g;if(e[d]!==c)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(g=0;g<s.length;g++)if(f=s[g]+d,e[f]!==c)return f}function k(b,c){for(var d in c)b.style[h(b,d)||d]=c[d];return b}function n(b){for(var d=1;d<arguments.length;d++){var e=arguments[d],f;for(f in e)b[f]===c&&(b[f]=e[f])}return b}function l(b){for(var c={x:b.offsetLeft,y:b.offsetTop};b=b.offsetParent;)c.x+=b.offsetLeft,c.y+=b.offsetTop;return c}var s=["webkit","Moz",
"ms","O"],u={},o,q=function(){var b=e("style");return f(d.getElementsByTagName("head")[0],b),b.sheet||b.styleSheet}(),x={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},w=function t(b){if(!this.spin)return new t(b);this.opts=n(b||{},t.defaults,x)};w.defaults={};n(w.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=k(e(0,{className:d.className}),{position:"relative",zIndex:d.zIndex}),
g=d.radius+d.length+d.width,h,m;b&&(b.insertBefore(f,b.firstChild||null),m=l(b),h=l(f),k(f,{left:("auto"==d.left?m.x-h.x+(b.offsetWidth>>1):d.left+g)+"px",top:("auto"==d.top?m.y-h.y+(b.offsetHeight>>1):d.top+g)+"px"}));f.setAttribute("aria-role","progressbar");c.lines(f,c.opts);if(!o){var A=0,n=d.fps,j=n/d.speed,s=(1-d.opacity)/(j*d.trail/100),q=j/d.lines;!function ya(){A++;for(var b=d.lines;b;b--){var e=Math.max(1-(A+b*q)%j*s,d.opacity);c.opacity(f,d.lines-b,e,d)}c.timeout=c.el&&setTimeout(ya,~~(1E3/
n))}()}return c},stop:function(){var b=this.el;return b&&(clearTimeout(this.timeout),b.parentNode&&b.parentNode.removeChild(b),this.el=c),this},lines:function(b,c){function d(b,f){return k(e(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:b,boxShadow:f,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*h+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.width>>1)+"px"})}for(var h=0,l;h<c.lines;h++)l=k(e(),{position:"absolute",top:1+~(c.width/2)+
"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:o&&g(c.opacity,c.trail,h,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&f(l,k(d("#000","0 0 4px #000"),{top:"2px"})),f(b,f(l,d(c.color,"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(b,c,d){c<b.childNodes.length&&(b.childNodes[c].style.opacity=d)}});!function(){function b(c,d){return e("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',d)}var c=k(e("group"),{behavior:"url(#default#VML)"});!h(c,
"transform")&&c.adj?(q.addRule(".spin-vml","behavior:url(#default#VML)"),w.prototype.lines=function(c,d){function e(){return k(b("group",{coordsize:h+" "+h,coordorigin:-m+" "+-m}),{width:h,height:h})}function g(c,l,h){f(j,f(k(e(),{rotation:360/d.lines*c+"deg",left:~~l}),f(k(b("roundrect",{arcsize:1}),{width:m,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),b("fill",{color:d.color,opacity:d.opacity}),b("stroke",{opacity:0}))))}var m=d.length+d.width,h=2*m,l=2*-(d.width+d.length)+"px",j=k(e(),
{position:"absolute",top:l,left:l});if(d.shadow)for(l=1;l<=d.lines;l++)g(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=d.lines;l++)g(l);return f(c,j)},w.prototype.opacity=function(b,c,d,e){b=b.firstChild;e=e.shadow&&e.lines||0;b&&c+e<b.childNodes.length&&(b=b.childNodes[c+e],b=b&&b.firstChild,b=b&&b.firstChild,b&&(b.opacity=d))}):o=h(c,"animation")}();b.Spinner=w})(window,document);Backbone.CartoDB=function(b,d,c){function e(b){this.sql=b}function f(b){return new e(b)}b=_.defaults(b,{USE_PROXY:!1,user:""});e.prototype.format=function(){var b=this.sql,c=arguments.length+1,d;for(i=0;i<c;d=arguments[i++])d="object"===typeof d?JSON.stringify(d):d,b=b.replace(RegExp("\\{"+(i-1)+"\\}","g"),d);return b};var g="https://"+(b.user+".cartodb.com/api/v1/sql"),d=d||function(b,c,e){var f=g,h=!0;e&&(f="api/v0/proxy/"+g,h=!1);1500<b.length?$.ajax({url:f,crossDomain:h,type:"POST",dataType:"json",
data:"q="+encodeURIComponent(b),success:c,error:function(){e?c():USE_PROXY&&d(b,c,true)}}):$.getJSON(g+"?q="+encodeURIComponent(b)+"&callback=?").success(c).fail(function(){c()}).complete(function(){})},b={setItem:function(){},getItem:function(){return null},removeItem:function(){}},c=c&&b,h=Backbone.Model.extend({_create_sql:function(){var b=f(" where {0} = '{1}'").format(this.columns[this.what],this.get(this.what).replace("'","''"));return"select "+this._sql_select().join(",")+" from "+this.table+
b},_sql_select:function(){var b=[],c;for(c in this.columns){var d=this.columns[c];-1!==d.indexOf("ST_")||"the_geom"===d?b.push(f("ST_AsGeoJSON({1}) as {0}").format(c,d)):b.push(f("{1} as {0}").format(c,d))}return b},_parse_columns:function(b){var c={},d;for(d in b){var e=b[d],f=this.columns[d];c[d]=-1!==f.indexOf("ST_")||"the_geom"===f?JSON.parse(e):b[d]}return c},fetch:function(){var b=this;d(this._create_sql(),function(c){b.set(b._parse_columns(c.rows[0]))})}}),b=Backbone.Model.extend({initialize:function(){},
author:function(){},coordinates:function(){},allowedToEdit:function(){return!0}}),k=Backbone.Collection.extend({_create_sql:function(){var b=this.table;_.isArray(this.table)||(b=[this.table]);b.join(",");b="select "+h.prototype._sql_select.call(this).join(",")+" from "+this.table;this.where_&&(b+=" WHERE "+this.where_);return b},fetch:function(){var b=this,e=this.sql||this._create_sql();"function"===typeof e&&(e=e.call(this));var f=this.cache?c.getItem(e):!1;f?b.reset(JSON.parse(f)):d(e,function(d){if(this.cache)try{c.setItem(e,
JSON.stringify(d.rows))}catch(f){}d=b.sql?d.rows:_.map(d.rows,function(c){return h.prototype._parse_columns.call(b,c)});b.reset(d)})}});return{query:d,CartoDBCollection:k,CartoDBModel:h,Note:b,SQL:f}};jQuery.fn.smartPlaceholder=function(b){this.each(function(){var d=b&&b.speed||150,c=b&&b.timeOut||100,e=$(this).find("span.placeholder"),f=$(this).find(":input").not("input[type='hidden'], input[type='submit']");f.val()&&e.hide();f.keydown(function(b){b.metaKey&&88==b.keyCode?setTimeout(function(){isEmpty(f.val())&&e.fadeIn(d)},c):b.metaKey&&86==b.keyCode?setTimeout(function(){!isEmpty(f.val())&&e.fadeOut(d)},c):setTimeout(function(){f.val()?e.fadeOut(d):e.fadeIn(d)},0)});e.on("click",function(){f.focus()});
f.blur(function(){!f.val()&&e.fadeIn(d)})})};google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var b=new google.maps.LatLngBounds,d=this.getPaths(),c,e=0;e<d.getLength();e++){c=d.getAt(e);for(var f=0;f<c.getLength();f++)b.extend(c.getAt(f))}return b});
var config={CARTODB_USER:"nexso2",CARTODB_ENDPOINT:"https://nexso2.cartodb.com/api/v2/sql",ZOOM:4,MINZOOM:3,MAXZOOM:16,LAT:2.7235,LNG:-81.171875,MONTHNAMES:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),YEARS:[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014],DATE_FORMAT:"yyyy-MM-dd",DATE_SUFFIXES:["th","st","nd","rd"],MIN_PROJECT_RADIUS:50,MIF_URL:"http://www5.iadb.org/mif/ProgramsandProjects/ProjectsList/ProjectProfile/tabid/85/language/en-US/Default.aspx?prj="};
config.START_YEAR=config.YEARS[0];config.END_YEAR=config.YEARS[config.YEARS.length-1];config.BIG_SPINNER_OPTIONS={lines:7,length:0,width:7,radius:8,rotate:0,color:"#000",speed:1,trail:55,shadow:!1,hwaccel:!1,zIndex:2E9,className:"spin"};var Infowindow,Timeline,Aside,mapView,filterView,debug=!0,topics=[1,2,3,4,5,6],solutionFilter="all",disabledFilters=!1,globalZindex=300,visibleOverlays=[];visibleOverlays.ashokas=!1;visibleOverlays.agencies=!0;visibleOverlays.projects=!0;
var projectsStyle={strokeColor:"#E79626",strokeOpacity:0.4,strokeWeight:1,fillColor:"#E79626",fillOpacity:0.2},projectsHoverStyle={strokeColor:"#E79626",strokeOpacity:0.6,strokeWeight:2,fillColor:"#E79626",fillOpacity:0.7},projectsDisabledStyle={strokeColor:"#E79626",strokeOpacity:0.2,strokeWeight:1,fillColor:"#E79626",fillOpacity:0.1},projectsDisabledHoverStyle={strokeColor:"#E79626",strokeOpacity:0.2,strokeWeight:2,fillColor:"#E79626",fillOpacity:0.2},circleStyleHover={strokeColor:"#1872A1",strokeOpacity:0.6,
strokeWeight:2,fillColor:"#1872A1",fillOpacity:0.3},circleStyle={strokeColor:"#E79626",strokeOpacity:0.6,strokeWeight:1,fillColor:"#E79626",fillOpacity:0},circleDisabledStyle={strokeColor:"#E79626",strokeOpacity:0.5,strokeWeight:1,fillColor:"#E79626",fillOpacity:0},circleDisabledHoverStyle={strokeColor:"#1872A1",strokeOpacity:0.5,strokeWeight:2,fillColor:"#1872A1",fillOpacity:0.2},mapStyles=[{featureType:"water",stylers:[{saturation:-34},{lightness:29}]},{featureType:"administrative.land_parcel",
elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{saturation:-99},{lightness:70}]},{featureType:"poi",elementType:"stylers",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road"},{featureType:"administrative",stylers:[{saturation:-98},{lightness:72}]},{}],queries={GET_ASHOKAS:"SELECT A.the_geom, A.ashoka_url AS agency_url, A.name, A.country, A.organization_name, A.external_url, A.solution_id, S1.name solution_name, S1.nexso_url solution_url, array_to_string(array(SELECT AT.topic_id FROM ashokas_topics AS AT WHERE AT.ashoka_id = A.cartodb_id), '|') as topic_ids, array_to_string(array(SELECT T.name FROM v1_topics T, ashokas_topics AS AT WHERE AT.ashoka_id = A.cartodb_id AND T.cartodb_id = AT.topic_id), '|') as topic_names FROM ashokas_topics AT, v2_ashoka A LEFT JOIN v1_solutions S1 ON (S1.cartodb_id = A.solution_id) WHERE A.the_geom IS NOT NULL AND AT.ashoka_id = A.cartodb_id",
GET_AGENCIES:"SELECT A.the_geom, A.external_url AS agency_url, A.name AS agency_name, P.solution_id, P.topic_id, array_to_string(array(SELECT P.cartodb_id FROM v3_projects AS P WHERE P.agency_id = a.cartodb_id), '|') as projects_ids, array_to_string(array(SELECT P.title FROM v3_projects AS P WHERE P.agency_id = a.cartodb_id), '|') as projects_titles FROM v1_agencies AS A LEFT JOIN v3_projects AS P ON (A.cartodb_id = P.agency_id) LEFT JOIN v3_projects ON (A.cartodb_id = P.solution_id)",GET_PROJECTS_QUERY_TEMPLATE_2:"WITH qu AS (     WITH hull as (         SELECT              P.nexso_code, COUNT(S.cartodb_id) AS solution_count, P.cartodb_id AS project_id, P.title, P.approval_date, P.fixed_approval_date, P.external_project_url,              P.location_verbatim, T.name AS topic_name, P.solution_id AS solution_id, P.budget, S.name AS solution_name, S.nexso_url AS solution_url,              A.external_url AS agency_url, A.name AS agency_name, ST_AsGeoJSON(A.the_geom) AS agency_position, PWA.the_geom as the_geom         FROM              v3_projects P LEFT JOIN v1_solutions S ON (P.solution_id = S.cartodb_id)             LEFT JOIN v1_agencies A ON (P.agency_id = A.cartodb_id)             LEFT JOIN v1_topics AS T ON (P.topic_id = T.cartodb_id),              v3_project_work_areas AS PWA         WHERE              P.nexso_code != 'RG-M1016' AND P.cartodb_id = PWA.project_id AND <%= topicsCondition %> <%= solutionCondition %>            (EXTRACT(YEAR FROM P.fixed_approval_date) >= <%= startYear %> AND              EXTRACT(YEAR FROM P.fixed_approval_date) <= <%= endYear %> OR (EXTRACT(YEAR FROM P.fixed_approval_date) < 2002))         GROUP BY              PWA.the_geom,P.nexso_code, P.cartodb_id, title, approval_date, fixed_approval_date,              external_project_url, location_verbatim, topic_name, solution_id, budget, A.external_url, A.name,             solution_name, solution_url, agency_position    )      SELECT *, ST_ConvexHull(the_geom), CASE WHEN nexso_code IN (SELECT distinct on (ST_SnapToGrid(ST_Centroid(the_geom), 0.60)) nexso_code FROM hull) THEN ST_ConvexHull(the_geom) ELSE ST_Buffer(ST_ConvexHull(the_geom),ceil(50*random())/10.0) END as hull_geom FROM hull  )  SELECT      nexso_code, solution_count, project_id, title, approval_date, fixed_approval_date, external_project_url,      location_verbatim, topic_name, budget, agency_name, agency_url, the_geom, agency_position, solution_id, solution_name, solution_url,      ST_X(ST_Centroid(the_geom)) AS pwa_lon,      ST_Y(ST_Centroid(the_geom)) AS pwa_lat FROM qu  ",
GET_PROJECTS_QUERY_TEMPLATE:"WITH qu AS (     WITH hull as (         SELECT              P.nexso_code, COUNT(S.cartodb_id) AS solution_count, P.cartodb_id AS project_id, P.title, P.approval_date, P.fixed_approval_date, P.external_project_url,              P.location_verbatim, T.name AS topic_name, P.solution_id AS solution_id, P.budget, S.name AS solution_name, S.nexso_url AS solution_url,              A.external_url AS agency_url, A.name AS agency_name, ST_AsGeoJSON(A.the_geom) AS agency_position,             ST_Collect(PWA.the_geom) AS the_geom          FROM              v3_projects P LEFT JOIN v1_solutions S ON (P.solution_id = S.cartodb_id)             LEFT JOIN v1_agencies A ON (P.agency_id = A.cartodb_id)             LEFT JOIN v1_topics AS T ON (P.topic_id = T.cartodb_id),              v3_project_work_areas AS PWA         WHERE              P.nexso_code != 'RG-M1016' AND P.cartodb_id = PWA.project_id AND <%= topicsCondition %> <%= solutionCondition %>            (EXTRACT(YEAR FROM P.fixed_approval_date) >= <%= startYear %> AND              EXTRACT(YEAR FROM P.fixed_approval_date) <= <%= endYear %> OR (EXTRACT(YEAR FROM P.fixed_approval_date) < 2002))         GROUP BY              P.nexso_code, P.cartodb_id, title, approval_date, fixed_approval_date,              external_project_url, location_verbatim, topic_name, solution_id, budget, A.external_url, A.name,             solution_name, solution_url, agency_position    )      SELECT *, ST_ConvexHull(the_geom), CASE WHEN nexso_code IN (SELECT distinct on (ST_SnapToGrid(ST_Centroid(the_geom), 0.60)) nexso_code FROM hull) THEN ST_ConvexHull(the_geom) ELSE ST_Buffer(ST_ConvexHull(the_geom),ceil(50*random())/10.0) END as hull_geom FROM hull  )  SELECT      nexso_code, solution_count, project_id, title, approval_date, fixed_approval_date, external_project_url,      location_verbatim, topic_name, budget, agency_name, agency_url, the_geom, agency_position, solution_id, solution_name, solution_url,      ST_X(ST_Centroid(the_geom)) AS pwa_lon,      ST_Y(ST_Centroid(the_geom)) AS pwa_lat,      ST_X(ST_Centroid(hull_geom)) AS centroid_lon,      ST_Y(ST_Centroid(hull_geom)) AS centroid_lat,      ST_X(ST_EndPoint(ST_LongestLine(ST_Centroid(hull_geom),hull_geom))) AS radius_point_lon,      ST_Y(ST_EndPoint(ST_LongestLine(ST_Centroid(hull_geom), hull_geom))) AS radius_point_lat FROM qu  ORDER BY     ST_Area(hull_geom) DESC"};
String.prototype.splice=function(b,d,c){return this.slice(0,b)+c+this.slice(b+Math.abs(d))};"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var nexsoStyle=new google.maps.StyledMapType(mapStyles,{name:"Nexso Style"});function isEmpty(b){return!b.match(/\S/g)}function parseDate(b){return Date.parseExact(b.splice(4,0,"-").splice(7,0,"-"),config.DATE_FORMAT)}
function prettifyDate(b){var d=parseDate(b);if(d){var b=d.getDate(),c=d.getMonth(),d=d.getFullYear(),e=config.DATE_SUFFIXES;return config.MONTHNAMES[c]+" "+b+(b>3?e[0]:e[b])+", "+d}return null}google.maps.Polygon.prototype.getBounds=function(){for(var b=new google.maps.LatLngBounds,d=this.getPaths(),c,e=0;e<d.getLength();e++){c=d.getAt(e);for(var f=0;f<c.getLength();f++)b.extend(c.getAt(f))}return b};function InfoWindow(b){this.id="infowindow-template";this.className="infowindow";this.latlng_=new google.maps.LatLng(0,0);this.template=b.template;this.map_=b.map;this.columns_=null;this.offsetHorizontal_=-107;this.width_=304;this.showDuration=250;this.setMap(b.map);this.params_=b}InfoWindow.prototype=new google.maps.OverlayView;
InfoWindow.prototype.draw=function(){var b=this.div_;if(!b){b=this.div_=document.createElement("DIV");b.className=this.className;var d=$("#"+this.id).html();this.template=_.template(d);b.innerHTML=this.template({projects:"",name:"Loading\u2026",agency_name:"",agency_url:"",overlayType:""});this.bindClose();google.maps.event.addDomListener(b,"dblclick",function(b){b.preventDefault?b.preventDefault():b.returnValue=!1});google.maps.event.addDomListener(b,"mousedown",function(b){b.preventDefault?b.preventDefault():
b.returnValue=!1;b.stopPropagation?b.stopPropagation():window.event.cancelBubble=!0});google.maps.event.addDomListener(b,"mouseup",function(b){b.preventDefault?b.preventDefault():b.returnValue=!1});google.maps.event.addDomListener(b,"mousewheel",function(b){b.stopPropagation?b.stopPropagation():window.event.cancelBubble=!0});google.maps.event.addDomListener(b,"DOMMouseScroll",function(b){b.stopPropagation?b.stopPropagation():window.event.cancelBubble=!0});this.getPanes().floatPane.appendChild(b);
b.style.opacity=0}this.setPosition()};InfoWindow.prototype.setPosition=function(b){if(this.div_){var d=this.div_,c=this.getProjection().fromLatLngToDivPixel(this.latlng_);if(c){d.style.width=this.width_+"px";d.style.left=c.x-38+"px";var e=-$(d).find(".box").height();d.style.top=c.y+e-10+"px"}b&&b()}};
InfoWindow.prototype.bindProjects=function(){$(this.div_).find(".project").click(function(b){b.preventDefault();b.stopPropagation();var b=parseFloat($(this).attr("data-lat")),d=parseFloat($(this).attr("data-lng")),c=new google.maps.LatLng(b,d);_.each(mapView.circles,function(b){b.circle.center.lat()===c.lat()&&b.circle.center.lng()===c.lng()&&setTimeout(function(){b.circle.parent.markSelected();google.maps.event.trigger(b.circle,"click",{autoopen:!0,latLng:c})},500)})})};
InfoWindow.prototype.bindClose=function(){var b=this;$(this.div_).find(".close").click(function(d){d.preventDefault();d.stopPropagation();b.hide()})};
InfoWindow.prototype.setContent=function(b){var d=null;if("agencies"===b.overlayType){var c=_.compact(b.projects_ids.split("|")),d=_.compact(b.projects_titles.split("|"));if(d=_.uniq(d))if(c=c[0],mapView.coordinates[c]){var e=mapView.coordinates[c][0],f=mapView.coordinates[c][1],d=_.map(d,function(b){return"<li><a href='#' class='project' data-lng='"+f+"' data-lat='"+e+"'>"+b+"</a></li>"});b.projects=d.join("")}else b.projects=""}this.div_.innerHTML=this.template(b);d&&this.bindProjects();this.bindClose()};
InfoWindow.prototype.setSolutionURL=function(b,d){$(this.div_).find(".solutions li a").html(b);$(this.div_).find(".solutions li a").attr("href",d)};InfoWindow.prototype.setCallback=function(b){$(".infowindow .btn").on("click",b)};InfoWindow.prototype.open=function(b){var d=this;this.latlng_=b;this.moveMaptoOpen();this.setPosition(function(){d.show()})};
InfoWindow.prototype.hide=function(){if(this.div_){var b=this.div_;$(b).animate({top:"+=10px",opacity:0},100,"swing",function(){b.style.visibility="hidden"})}};InfoWindow.prototype.show=function(){this.div_&&(this.div_.style.opacity=0,$(this.div_).animate({top:"-=10px",opacity:1},this.showDuration),this.div_.style.visibility="visible")};InfoWindow.prototype.isVisible=function(){return this.div_?"visible"===this.div_.style.visibility?!0:!1:!1};
InfoWindow.prototype.moveMaptoOpen=function(){var b=0,d=0,c=this.getProjection().fromLatLngToContainerPixel(this.latlng_);c.x+320>=$("#map").width()&&(b=c.x+320-$("#map").width());200>c.y-$(this.div_).find(".box").height()&&(d=c.y-$(this.div_).find(".box").height()-130);this.map_.panBy(b,d)};function NexsoMarker(b,d,c){this.properties=c;this.latlng_=d.position;this.opts=d;this.offsetHorizontal_=this.offsetVertical_=-7;this.overlayType_=b;this.height_=this.width_=14;this.div_=null}NexsoMarker.prototype=new google.maps.OverlayView;
NexsoMarker.prototype.draw=function(){var b=this,d=this.div_;d||(d=this.div_=document.createElement("DIV"),d.className="marker",d.innerHTML='<img src="'+this.opts.icon+'" alt="" title="" />',google.maps.event.addDomListener(d,"click",function(c){c&&(c.preventDefault?c.preventDefault():c.returnValue=!1,c.stopPropagation?c.stopPropagation():window.event.cancelBubble=!0);b.properties.overlayType=b.overlayType_;if("project"==b.properties.overlayType)b.showInfowindow();else{if(c=b.properties.topic_names)c=
_.compact(c.split("|")),0<c.length&&(b.properties.topic_names=c.join(". "),b.properties.topic_names+=".");Infowindow.setContent(b.properties);Infowindow.open(b.latlng_)}}),google.maps.event.addDomListener(d,"mouseover",function(){globalZindex++;$(this).css("zIndex",globalZindex).animate({width:"18px",height:"18px",marginTop:"-2px",marginLeft:"-2px"},100)}),google.maps.event.addDomListener(d,"mouseout",function(){$(this).animate({width:"14px",height:"14px",marginTop:"0px",marginLeft:"0px"},100)}),
this.getPanes().overlayMouseTarget.appendChild(d));this.setPosition()};NexsoMarker.prototype.setPosition=function(){if(this.div_){var b=this.div_,d=this.getProjection().fromLatLngToDivPixel(this.latlng_);d&&(b.style.width=this.width_+"px",b.style.left=d.x+this.offsetHorizontal_+"px",b.style.top=d.y+this.offsetVertical_+"px")}};
NexsoMarker.prototype.markSelected=function(){_.each(mapView.projectMarkers[mapView.currentProject],function(b){_.each(b.properties.polygons,function(b){b.setOptions(projectsHoverStyle);b.disabled=!1})});this.hideAll();filterView.disable()};NexsoMarker.prototype.unMarkSelected=function(b){_.each(this.properties.polygons,function(b){b.setOptions(projectsStyle)});b&&this.showAll();filterView.enable()};
NexsoMarker.prototype.hideAll=function(){mapView.hideOverlay("ashokas");_.each(mapView.projectMarkers,function(b){_.each(b,function(b){b.properties.nexso_code!=mapView.currentProject&&_.each(b.properties.polygons,function(b){b.setOptions(projectsDisabledStyle);b.disabled=!0})})})};
NexsoMarker.prototype.showAll=function(){var b=this;_.each(this.specialAgencies,function(b){b.hide()});this.specialAgencies=[];mapView.addAgencies();mapView.addAshokas();_.each(mapView.markers,function(d){b!=d&&_.each(d.properties.polygons,function(b){b.setOptions(projectsStyle);b.disabled=!1})})};
NexsoMarker.prototype.hide=function(b){if(this.div_&&!$(this.div_).hasClass("h")){var d=this.div_;b?$(d).animate({opacity:0},{queue:!0,duration:500,complete:function(){d.style.display="none";$(this).addClass("h")}}):($(d).css({opacity:0,display:"none"}),$(d).addClass("h"))}};NexsoMarker.prototype.changeOpacity=function(b){$(this.div_).animate({opacity:b},{queue:!0,duration:500})};
NexsoMarker.prototype.show=function(b){if(this.div_&&$(this.div_).hasClass("h")){var d=this.div_;b?(d.style.display="block",d.style.opacity=0,$(d).animate({opacity:0.99},{queue:!0,duration:500,complete:function(){$(this).removeClass("h")}})):($(d).css({opacity:0.99,display:"block"}),$(d).removeClass("h"))}};NexsoMarker.prototype.showContent=function(){this.div_&&google.maps.event.trigger(this.div_,"click")};NexsoMarker.prototype.getPosition=function(){return this.latlng_};
NexsoMarker.prototype.removeLine=function(){this.properties.line&&this.properties.line.setMap(null)};NexsoMarker.prototype.drawLine=function(){this.properties.line&&this.properties.line.setMap(window.map)};
NexsoMarker.prototype.generateLine=function(){if(this.properties.agency_position){var b=$.parseJSON(this.properties.agency_position).coordinates,b=new google.maps.LatLng(b[1],b[0]),d=new google.maps.LatLng(this.properties.pwa_lat,this.properties.pwa_lon);this.properties.line=new google.maps.Polyline({path:[d,b],strokeColor:"#1872A1",strokeWeight:1,visible:!0})}};
NexsoMarker.prototype.showInfowindow=function(){var b=this;mapView.previousZoom=window.map.getZoom();mapView.previousCenter=window.map.getCenter();var d=b.properties;Infowindow.setContent({name:d.title,overlayType:"project",agencyName:d.agency_name,solution_name:d.solution_name,solution_url:d.solution_url});Infowindow.setCallback(function(c){c&&c.preventDefault();Timeline.hide();Aside.hide(function(){b.onHiddenAside(b)});mapView.removeLines(mapView.currentProject);mapView.showLines(b.properties.nexso_code)});
Infowindow.open(b.latlng_)};
NexsoMarker.prototype.onHiddenAside=function(b){function d(b,c){var d=x.find("li."+b);null!==c&&"object"===typeof c?null!==c.text&&null!==c.url?(d.find("a").text(c.text).attr("href",c.url),d.show()):null!==c.text?(d.find("a").text(c.text).attr("href","#"),d.show()):d.hide():c?(d.find("span").text(c),d.show()):d.hide()}var c=b.properties,e=c.title,f=c.approval_date,g=config.MIF_URL+c.nexso_code,h=c.solution_name,k=c.solution_url,n=c.agency_name,l=c.agency_url,s=c.nexso_code,u=c.topic_name,o=c.location_verbatim,
c=c.budget,q=$(".aside .content"),x=q.find("ul.data");q.find(".header h2").html(e);e=prettifyDate(f);parseDate(f);d("approvalDate",e);d("topic",u);d("nexso_code",s);d("location",o);d("budget",accounting.formatMoney(c));d("more",{url:g,text:"External link"});d("solution",{url:k,text:h});d("agency",{url:l,text:n});Aside.show("project");Infowindow.hide();(f=$(".aside a.toggle").data("project"))&&f.unMarkSelected();$(".aside a.toggle").data("project",b);b.markSelected()};$(function(){function b(){$(".input_field input.lat").val("");$(".input_field input.lng").val("")}function d(){$(".addresspicker").val("");$(".input_field input.lat").val("");$(".input_field input.lng").val("");$(".input_field .placeholder").fadeIn(250)}function c(){var b="project";$(".aside").hasClass("search")&&(b="search");var c=$(".scroll-pane-"+b),d=$(window).height(),e=c.offset().top;c.css("height",d-e-20);z[b]?(b=z[b].data("jsp"),b.reinitialise(),b.scrollTo(0,0)):(z[b]=c,z[b].jScrollPane())}
function e(b,c){0<$(".welcome").length&&($(".stats li."+b+" span").html(c),$(".stats li."+b+" .spinner ").fadeOut(250,function(){$(this).remove();$(".stats li."+b).removeClass("disabled")}))}function f(){var b=new google.maps.LatLng(config.LAT,config.LNG);I.panTo(b);I.setZoom(config.ZOOM)}function g(){Aside.hide(Timeline.show);d();k();f();$(".timeline-cover").animate({opacity:1,bottom:"23px"},250);$(".welcome").fadeIn(250);$(".backdrop").fadeIn(250,function(){$(".nav .input_field").fadeOut(300,function(){$(".filter-help").animate({top:"0",
opacity:1},250)});$(".nav ul.filters").animate({right:0},250);$(".left-side").animate({left:"0",opacity:1},400);$(".right-side").animate({left:"0",opacity:1},400)})}function h(){var c=$("input[data-geo='lat']").val(),d=$("input[data-geo='lng']").val();c&&d&&(Aside.hide(),b(),l(function(){var b=new google.maps.LatLng(c,d);I.panTo(b);I.setZoom(6);n(!0)}))}function k(){var b=$(".aside .toggle");if(data=b.data("project"))data.unMarkSelected(!0),b.removeData("project")}function n(c){var d=[],e=[],f=I.getBounds();
k();_.each(w,function(b){var c=new google.maps.LatLng(b.lat,b.lng);f.contains(c)&&d.push(b)});$(".results li").each(function(b,c){$(c).remove()});if(0>=d)$(".aside").find(".counter").html("No projects found on the screen"),$(".aside .spinner").fadeOut(250);else if(0<d.length){what="search";z[what]||(z[what]=$(".scroll-pane-"+what),z[what].jScrollPane());var g=z[what].data("jsp"),h=0;_.each(d,function(b){if(!e[b.value]){var c=$('<a href="#">'+b.value+"</a>");g.getContentPane().append($("<li></li>").append(c));
e[b.value]=true;h++;c.on("click",function(c){c.preventDefault();x[b.key].showInfowindow()})}});$(".aside").find(".counter").html(h+" "+(1===h?" project on screen":" projects on screen"));g.reinitialise();b();$(".aside .spinner").fadeOut(250);c&&Aside.show("search")}}function l(b){var c=function(){n();b&&b()},d=function(){Aside.show();$(".backdrop").fadeOut(250);$(".welcome").fadeOut(250,c)};$(".timeline-cover").animate({opacity:0,bottom:-30},250,function(){$(".filter-help").animate({top:"-100px",
opacity:0},250);$(".nav ul.filters").animate({right:"240px"},300,function(){$(".nav .input_field").fadeIn(250)});$(".left-side").animate({left:"-200px",opacity:0},400);$(".right-side").animate({left:"200px",opacity:0},400,d);$(".pac-container").fadeOut(250)})}function s(b){b.addClass("loading");b=document.getElementById(b.attr("id"));b=(new Spinner({lines:7,length:0,width:3,radius:4,rotate:0,color:"#000",speed:1,trail:55,shadow:!1,hwaccel:!1,zIndex:2E9,left:-22,top:0})).spin(b);$(b.el).fadeIn(250)}
var u=0,o=0,q=[],x=[],w=[],z=[],t,O;$(document).keyup(function(b){27===b.keyCode&&(Infowindow.hide(),$(".nav .filter").fadeOut(150))});$(window).resize(function(){c()});$(document).on("click",function(){$(".nav a[data-toggle='filter']").hasClass("selected")&&($(".nav a[data-toggle='filter']").removeClass("selected"),$(".nav .filter").fadeOut(150))});$(".addresspicker").keydown(function(b){13===b.keyCode&&(b.preventDefault(),b.stopPropagation(),h())});0>=$("ul.radio li.selected").length&&$("ul.radio li:first-child").addClass("selected");
$(".nav a[data-toggle='filter']").on("click",function(b){b.preventDefault();b.stopPropagation();$(".nav ul.filters").hasClass("disabled")||($(".nav a[data-toggle='filter'].selected").not(this).removeClass("selected"),$(this).toggleClass("selected"),$(".nav a[data-toggle='filter']").not(this).parent().find(".filter").fadeOut(250),$(this).parent().find(".filter").fadeToggle(150))});$(".nav .filter ul.radio li").on("click",function(b){b.preventDefault();b.stopPropagation();$(this).parent().find("li").each(function(){$(this).attr("id")});
$(this).parent().find("li").removeClass("selected");$(this).addClass("selected")});$(".nav .filter").on("click",function(b){b.preventDefault();b.stopPropagation()});$(".nav a[data-click='search']").on("click",function(b){b.preventDefault();b.stopPropagation();h()});$(".welcome a[data-click='search']").on("click",function(b){b.preventDefault();b.stopPropagation();h()});$("a[data-click='explore']").on("click",function(c){c.preventDefault();c.stopPropagation();var d=$("input[data-geo='lat']").val(),
e=$("input[data-geo='lng']").val();!d||!e?l():(Aside.hide(),b(),l(function(){var b=new google.maps.LatLng(d,e);I.panTo(b);I.setZoom(6);n(!0)}))});$("a[data-click='welcome']").on("click",function(b){b.preventDefault();b.stopPropagation();g()});var B=new google.maps.LatLngBounds(new google.maps.LatLng(13.39029,-26.33247),new google.maps.LatLng(-59.450451,-109.47493));$(".addresspicker").geocomplete({details:".input_field",detailsAttribute:"data-geo",bounds:B});$("ul.stats li").each(function(b,c){var d=
null,e=$(c),d="spinner_"+e.attr("class");e.append('<div id="'+d+'" class="spinner"></div>');d=document.getElementById(d);(new Spinner(config.BIG_SPINNER_OPTIONS)).spin(d);e.find(".spinner").fadeIn(250)});$(".input_field").smartPlaceholder();Aside=function(){var b=$(".aside"),e=$(".nav .toggle, .aside a.toggle"),f=0;(function(){e.on("click",function(b){b.preventDefault();e.hasClass("closed")?(n(),Aside.show("search")):0===f?(k(),I.setOptions({zoom:mapView.previousZoom,center:mapView.previousCenter}),
Aside.hide(Timeline.show),mapView.removeLines(mapView.currentProject),mapView.currentProject=null):(Aside.hide(),d())})})();_show=function(g){"project"===g?(f=0,d(),b.find(".search").hide(),b.find(".project").show(),b.removeClass("search")):(f=1,b.find(".project").hide(),b.find(".search").show(),b.addClass("search"));$(".nav .back").fadeIn(250);1200>$(window).width()&&$(".nav .options").animate({left:"-80px"},250);b.find("ul.data li").css({opacity:0,marginLeft:150});$("#map").animate({right:"352px"},
250);b.animate({right:0},250,function(){e.removeClass("closed");c();b.delay(300).find("p").slideDown(350,function(){setTimeout(function(){c()},b.find("ul.data > li").length*100);b.find("ul.data > li").each(function(b,c){$(c).delay(b*100).animate({marginLeft:0,opacity:1},200)})})})};_hide=function(c){$("#map").animate({right:"0"},250);$(".nav .back").fadeOut(250);0<$(".nav .options").position().left&&$(".nav .options").animate({left:"0"},250);b.animate({right:"-330px"},250,function(){b.find("p").hide();
e.addClass("closed");b.removeClass("search");c&&c()})};_isHidden=function(){return e.hasClass("closed")};return{hide:_hide,show:_show,isHidden:_isHidden}}();Timeline=function(){_show=function(){Aside.isHidden()&&$("#timeline").animate({bottom:19,opacity:1},300)};_hide=function(b){$("#timeline").animate({bottom:-90,opacity:0},250,function(){b&&b()})};return{hide:_hide,show:_show}}();$("#timeline .slider").slider({range:!0,min:0,max:390,step:30,values:[0,500],stop:function(b,c){$(".aside .spinner").fadeIn(250);
var d=c.values[1]/30;t=config.YEARS[c.values[0]/30+1-1];O=config.YEARS[d-1];mapView.removeOverlay("projects");mapView.addProjects()},slide:function(b,c){$("#timeline li").removeClass("selected");var d=c.values[0]/30+1,e=c.values[1]/30;t=config.YEARS[d-1];for(O=config.YEARS[e-1];d<=e;d++)$("#timeline li:nth-child("+d+")").addClass("selected")}});var B={zoom:config.ZOOM,minZoom:config.MINZOOM,maxZoom:config.MAXZOOM,center:new google.maps.LatLng(config.LAT,config.LNG),mapTypeId:google.maps.MapTypeId.ROADMAP,
disableDefaultUI:!0,scaleControl:!0},I=new google.maps.Map(document.getElementById("map"),B);window.map=I;var B=document.getElementById("zoom_controls"),D=document.createElement("DIV");B.appendChild(D);new function(b,c){b.setAttribute("class","zoom_in");google.maps.event.addDomListener(b,"mousedown",function(){var b=c.getZoom()+1;20>b&&c.setZoom(b)})}(D,I);D.index=1;D=document.createElement("DIV");B.appendChild(D);new function(b,c){b.setAttribute("class","zoom_out");google.maps.event.addDomListener(b,
"mousedown",function(){var b=c.getZoom()-1;2<b&&c.setZoom(b)})}(D,I);D.index=2;I.mapTypes.set("nexsoStyle",nexsoStyle);I.setMapTypeId("nexsoStyle");google.maps.event.addDomListener(I,"dragend",function(){Aside.isHidden()||($(".aside .spinner").fadeIn(250),n())});google.maps.event.addListener(I,"zoom_changed",function(){Aside.isHidden()||($(".aside .spinner").fadeIn(250),n())});Infowindow=new InfoWindow({map:I});var D=Backbone.CartoDB({user:config.CARTODB_USER}),H=D.CartoDBModel.extend({topic_id:function(){return this.get("topic_id")},
name:function(){return this.get("name")},lat:function(){return!this.get("location")?0:this.get("location").coordinates[1]},lng:function(){return!this.get("location")?0:this.get("location").coordinates[0]}}),B=D.CartoDBCollection.extend({model:H,table:"v1_ashoka",columns:{name:"name",location:"the_geom",topic_id:"topic_id"}}),H=D.CartoDBCollection.extend({model:H,table:"v1_agencies",columns:{name:"name",location:"the_geom"}}),D=Backbone.View.extend({events:{},initialize:function(){this.state=1;this.overlays=
[];this.markers=[];this.coordinates=[];this.addAgencies();this.countAshokas();this.addProjects();this.currentProject=null;this.projectMarkers={};this.previousZoom=3;this.previousCenter=null},enableFilters:function(){disabledFilters&&setTimeout(function(){disabledFilters=!1;$(".nav .spinner").fadeOut(250,function(){$(this).parent().removeClass("loading");$(this).remove()})},250)},disableFilters:function(){disabledFilters||(disabledFilters=!0)},removeOverlay:function(b){"ashokas"===b||"agencies"===
b?this.removeMarkers(b):"projects"===b&&this.removeProjects(b)},removeMarkers:function(b){if(this.overlays[b]){for(var c=0;c<this.overlays[b].length;c++)this.overlays[b][c].hide(!0);this.enableFilters()}},removeProjects:function(b){u=o=0;delete q;q=[];delete this.projectMarkers;this.projectMarkers={};delete w;w=[];delete x;x=[];if(0<this.markers.length)for(var c=0;c<this.markers.length;c++)this.markers[c].hide();if(this.overlays[b].length)for(c=0;c<this.overlays[b].length;c++)this.overlays[b][c].length&&
this.overlays[b][c][0].setMap(null);this.enableFilters()},removeLines:function(b){_.each(this.projectMarkers[b],function(b){b.removeLine()})},showLines:function(b){this.currentProject=b;var c=new google.maps.LatLngBounds,d=!1;_.each(this.projectMarkers[b],function(b){b.drawLine();b.properties.line&&(c.extend(b.properties.line.getPath().getAt(1)),d=!0);b.properties.polygons&&(c.extend(b.properties.polygons[0].getBounds().getCenter()),d=!0)});window.map.panBy(176,0);d&&(window.map.fitBounds(c),window.map.setZoom(window.map.getZoom()-
1))},changeOpacity:function(b,c){_.each(mapView.overlays[b],function(b){b.changeOpacity(c)})},hideOverlay:function(b){_.each(mapView.overlays[b],function(b){b.hide(!0)})},countAshokas:function(){$.ajax({url:config.CARTODB_ENDPOINT,data:{q:queries.GET_ASHOKAS,format:"geojson"},dataType:"jsonp",success:function(b){e("ashokas",b.features.length)}})},addAshokas:function(){visibleOverlays.ashokas&&(this.disableFilters(),this.overlays.ashokas?(_.each(this.overlays.ashokas,function(b){var c=b.properties.topic_ids.split("|");
_.isArray(c)||(c=[c]);c=_.map(c,function(b){return parseInt(b,10)});c=_.intersect(topics,c);("solutions"===solutionFilter&&b.properties.solution_id||"all"===solutionFilter)&&0<c.length?b.show(!0):b.hide(!0)}),this.enableFilters()):this.addOverlay("ashokas",queries.GET_ASHOKAS))},addAgencies:function(){visibleOverlays.agencies&&(this.disableFilters(),this.overlays.agencies?(_.each(this.overlays.agencies,function(b){("solutions"===solutionFilter&&b.properties.solution_id||"all"===solutionFilter)&&_.include(topics,
b.properties.topic_id)?b.show(!0):b.hide(!0)}),this.enableFilters()):this.addOverlay("agencies",queries.GET_AGENCIES))},addProjects:function(){this.disableFilters();if(visibleOverlays.projects){t||(t=config.START_YEAR);O||(O=config.END_YEAR);var b=0<topics.length?" P.topic_id  IN ("+topics.join(",")+") AND ":" P.topic_id = 0 AND ",c="solutions"===solutionFilter?" P.solution_id IS NOT NULL AND ":"";this.addOverlay("projects",_.template(queries.GET_PROJECTS_QUERY_TEMPLATE_2)({startYear:t,endYear:O,
topicsCondition:b,solutionCondition:c}),function(){Timeline.show()})}},addOverlay:function(b,c,d){var f=this;this.disableFilters();$.ajax({url:config.CARTODB_ENDPOINT,data:{q:c,format:"geojson"},dataType:"jsonp",success:function(c){if(0>=c.features.length)f.enableFilters();else{"projects"!=b&&e(b,c.features.length);var g=projectsStyle,h=null;try{h=JSON.parse(c)}catch(k){h=c}c=$.extend({},g);f.overlays[b]=new GeoJSON(h,b,c||null);if(!(f.overlays[b].type&&"Error"===f.overlays[b].type)){q=[];x=[];w=
[];mapView.projectMarkers={};p=0;window.view=f;if(f.overlays[b].length)for(h=0;h<f.overlays[b].length;h++)if(f.overlays[b][h].length){f.overlays[b][h][0].setMap(I);var c=f.overlays[b][h][0].geojsonProperties,g=c.pwa_lat,l=c.pwa_lon;p++;var c=f.overlays[b][h],s=l,l=c[0].geojsonProperties,A=l.nexso_code+""+l.pwa_lon+""+l.pwa_lat,t=q[A];t?t.show():(l.polygons=c,c=new google.maps.LatLng(g,s),t=new NexsoMarker("project",{position:c,icon:"img/icons/working_area.png"},l),t.setMap(I),q[A]=!0,void 0==mapView.projectMarkers[l.nexso_code]&&
(mapView.projectMarkers[l.nexso_code]=[],o++),u+=t.properties.solution_count,mapView.projectMarkers[l.nexso_code].push(t),w.push({key:A,value:t.properties.title,lat:t.properties.pwa_lat,lng:t.properties.pwa_lon}),x[A]=t);c=t;c.generateLine();f.markers.push(c)}else f.overlays[b][h].setMap(I);"projects"===b&&(e("projects",o),e("solutions",u))}f.enableFilters();d&&d();"projects"===b&&!Aside.isHidden()&&n()}}})}}),H=new H,B=new B;mapView=new D({el:$("#map"),ashoka:B,agencies:H});filterView=new (Backbone.View.extend({initialize:function(){var b=
this;this.$("#solution-filter li").on("click",function(c){c.preventDefault();c.stopPropagation();b.filterBySolution($(this))});this.$("#topic-filter li").on("click",function(c){c.preventDefault();c.stopPropagation();b.filterByTopic($(this))});this.$("#type-filter li").on("click",function(c){c.preventDefault();c.stopPropagation();b.filterByType($(this))})},disable:function(){$(".cancel").on("click",function(b){b.preventDefault();b.stopPropagation()});$("ul.filters").addClass("disabled");$(".cancel").show()},
enable:function(){$("ul.filters").removeClass("disabled");$(".cancel").hide()},filterByTopic:function(b){if(!disabledFilters){mapView.disableFilters();Infowindow.hide();s(b);b.toggleClass("selected");b.attr("id").trim();var c=parseInt(b.attr("class").replace(/selected/,"").replace("t","").trim(),10);b.hasClass("selected")?topics.push(c):topics=_.without(topics,c);0<topics.length?(mapView.removeOverlay("projects"),x=[],w=[],Aside.isHidden()||n(),mapView.addProjects(),mapView.addAgencies(),mapView.addAshokas()):
(x=[],w=[],Aside.isHidden()||n(),mapView.removeOverlay("projects"),mapView.removeOverlay("agencies"),mapView.removeOverlay("ashokas"))}},filterBySolution:function(b){disabledFilters||(mapView.disableFilters(),Infowindow.hide(),s(b),solutionFilter=b.attr("id").trim(),mapView.removeOverlay("projects"),mapView.addProjects(),mapView.addAgencies(),mapView.addAshokas())},filterByType:function(b){if(!disabledFilters){mapView.disableFilters();Infowindow.hide();s(b);b.toggleClass("selected");var c=b.attr("id").trim();
b.attr("class").replace(/selected/,"").trim();if(b.hasClass("selected"))visibleOverlays[c]=!0,"agencies"===c?mapView.addAgencies():"ashokas"===c?mapView.addAshokas():"projects"===c&&mapView.addProjects();else if(visibleOverlays[c]=!1,"projects"===c||"agencies"===c||"ashokas"===c)"projects"===c&&(x=[],w=[],Aside.isHidden()||n(),Timeline.hide()),Infowindow.hide(),mapView.removeOverlay(c)}}}))({el:$(".nav .content")})});
